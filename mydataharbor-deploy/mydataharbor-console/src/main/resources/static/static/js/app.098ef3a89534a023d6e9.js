webpackJsonp([1],{"3qvG":function(e,t){},"4/hK":function(e,t){},"9ozf":function(e,t){},E22g:function(e,t){},Fltz:function(e,t){},IaXF:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={};a.d(o,"parseTime",function(){return B}),a.d(o,"formatTime",function(){return H}),a.d(o,"timeAgo",function(){return ve}),a.d(o,"numberFormatter",function(){return be}),a.d(o,"toThousandFilter",function(){return Ce}),a.d(o,"formatDate",function(){return ye});var n=a("fZjL"),r=a.n(n),l=a("7+uW"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[this.isRouterAlice?t("router-view"):this._e()],1)},staticRenderFns:[]};var i=a("VU/8")({name:"App",provide:function(){return{reload:this.reload}},data:function(){return{isRouterAlice:!0}},methods:{reload:function(){this.isRouterAlice=!1,this.$nextTick(function(){this.isRouterAlice=!0})}}},s,!1,function(e){a("WMoJ")},null,null).exports,c=a("/ocq"),d={name:"Dashboard",data:function(){return{imgSrc:a("ONMz")}}},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticStyle:{"text-align":"center"}},[t("img",{attrs:{src:this.imgSrc,alt:""}})])])},staticRenderFns:[]};var p={name:"Home",components:{DashBoard:a("VU/8")(d,u,!1,function(e){a("IaXF")},"data-v-228c0a9e",null).exports},data:function(){return{activeIndex:"/"==this.$router.currentRoute.path?"/home":this.$router.currentRoute.path,consoleVersion:""}},mounted:function(){var e=this;this.getRequest("/mydataharbor/dashboard/version").then(function(t){e.consoleVersion=t["console-version"]})},computed:{},methods:{}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{padding:"0 5%"}},[a("el-header",[a("el-menu",{attrs:{mode:"horizontal",router:"","unique-opened":"","default-active":e.activeIndex}},[a("el-menu-item",{attrs:{index:"/home"}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("首页")])]),e._v(" "),a("el-menu-item",{attrs:{index:"/cluster"}},[a("i",{staticClass:"el-icon-s-help"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("集群管理")])]),e._v(" "),a("el-menu-item",{attrs:{index:"/plugin"}},[a("i",{staticClass:"el-icon-s-data"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("插件仓库")])])],1)],1),e._v(" "),a("el-container",{staticStyle:{height:"100%"}},[a("el-main",["/home"==this.$router.currentRoute.path||"/"==this.$router.currentRoute.path?a("DashBoard"):e._e(),e._v(" "),a("router-view",{staticClass:"homeRouterView"})],1)],1),e._v(" "),a("el-footer",[a("el-link",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"},attrs:{href:"https://www.mydataharbor.com"}},[e._v("   官方网站   ")]),e._v(" "),a("el-link",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"},attrs:{href:"/swagger-ui/#/"}},[e._v("   swagger api文档   ")]),e._v(" "),a("p",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v("    MyDataHarbor控制台版本："+e._s(e.consoleVersion)+"    ")])],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(p,f,!1,function(e){a("oipt")},"data-v-26cb73d2",null).exports,m=a("mvHQ"),h=a.n(m),v={name:"Node",props:["nodeList"],data:function(){return{nodes:this.nodeList,pageNo:1,pageSize:10,pageTotal:0}},mounted:function(){this.init()},methods:{init:function(){},handlePageChange:function(){},formatDuring:function(e){e=(new Date).getTime()-e;var t=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),o=Math.floor(e%36e5/6e4);return t>0?t+"天"+a+"小时"+o+"分钟":a+"小时"+o+"分钟"}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.nodes,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"nodeName",label:"节点名",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"IP"}}),e._v(" "),a("el-table-column",{attrs:{prop:"port",label:"端口"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hostName",label:"hostName"}}),e._v(" "),a("el-table-column",{attrs:{label:"运行时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.formatDuring(t.row.startTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"taskNum",label:"任务数"}}),e._v(" "),a("el-table-column",{attrs:{label:"leader"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.leader?a("el-tag",{attrs:{type:"success"}},[e._v("true")]):a("el-tag",[e._v("false")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"javaVersion",label:"javaVersion"}}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"version"}}),e._v(" "),a("el-table-column",{attrs:{prop:"osName",label:"osName"}}),e._v(" "),a("el-table-column",{attrs:{prop:"osArch",label:"osArch"}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"sizes, total, prev, pager, next","current-page":e.pageNo,"page-sizes":[5,10,20,50],"page-size":e.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1)},staticRenderFns:[]};var C,y=a("VU/8")(v,b,!1,function(e){a("3qvG")},"data-v-b8237c42",null).exports,k=a("bOdI"),S=a.n(k),D={name:"Plugins",props:["groupName"],data:function(){return{plugins:[],originalPlugins:[],pageNo:1,pageSize:10,pageTotal:0,dialogFormVisible:!1,form:{groupName:this.groupName,pluginId:"",version:"",sync:!1},pluginInstallList:[],pluginInfoMap:{},rules:{pluginId:[{required:!0,message:"插件ID不能为空",trigger:"blur"}],version:[{required:!0,message:"版本不能为空",trigger:"blur"}]},allPlugins:[],allVersion:[],dragging:!1,dragRow:null,dragIndex:-1,dropIndex:-1,orderChanged:!1,loading:!1,rowHeight:0,startMouseY:0,startScrollTop:0}},watch:{"form.pluginId":function(e){var t=this;this.form.version="",this.allPlugins.forEach(function(a){a.plugins.forEach(function(a){a.pluginId==e&&(t.allVersion=a.repoPlugins)})})}},mounted:function(){this.initData(),this.initPlugins(),document.addEventListener("mousemove",this.handleDragMove),document.addEventListener("mouseup",this.handleDragEnd),this.$nextTick(function(){console.log("Vue mounted, testing event binding");var e=document.querySelectorAll(".drag-handle");console.log("Found drag handles:",e.length),e.length>0&&e.forEach(function(e){e.addEventListener("click",function(){console.log("Drag handle clicked")})})})},beforeDestroy:function(){document.removeEventListener("mousemove",this.handleDragMove),document.removeEventListener("mouseup",this.handleDragEnd)},methods:(C={clearData:function(){this.form={groupName:this.groupName,pluginId:"",version:"",sync:!1}},tableRowClassName:function(e){e.row;var t=e.rowIndex;return this.dragging&&t===this.dropIndex?"drop-over-row":""},handleDragStart:function(e,t){this.dragging=!0,this.dragIndex=t,this.dragRow=this.plugins[t];var a=this.$refs.multipleTable.$el,o=(a.getBoundingClientRect(),a.querySelectorAll(".el-table__body tr"));this.rowHeight=o[0].offsetHeight,document.body.style.cursor="move",this.startMouseY=e.clientY,this.startScrollTop=a.querySelector(".el-table__body-wrapper").scrollTop},handleDragMove:function(e){if(this.dragging){var t=this.$refs.multipleTable.$el.querySelector(".el-table__body-wrapper"),a=t.getBoundingClientRect(),o=e.clientY-a.top+t.scrollTop,n=Math.floor(o/this.rowHeight);n<0&&(n=0),n>=this.plugins.length&&(n=this.plugins.length-1),this.dropIndex!==n&&(this.dropIndex=n,this.$forceUpdate());e.clientY-a.top<40?t.scrollTop-=10:a.bottom-e.clientY<40&&(t.scrollTop+=10)}},handleDragEnd:function(){if(this.dragging){if(-1!==this.dragIndex&&-1!==this.dropIndex&&this.dragIndex!==this.dropIndex){var e=this.plugins.splice(this.dragIndex,1)[0];this.plugins.splice(this.dropIndex,0,e),this.orderChanged=!0}this.dragging=!1,this.dragRow=null,this.dragIndex=-1,this.dropIndex=-1,document.body.style.cursor="",this.$forceUpdate()}},savePluginOrder:function(){var e=this;if(this.orderChanged){this.loading=!0;var t=this.plugins.map(function(e){return e.pluginId});console.log("Saving plugin order:",t),this.postRequest("mydataharbor/node/adjustPluginOrder?groupName="+this.groupName+"&pluginIds="+t.join(",")).then(function(t){0===t.code?(e.$message({message:"插件顺序调整成功",type:"success",duration:3e3}),e.orderChanged=!1,e.originalPlugins=JSON.parse(h()(e.plugins))):(e.$message({message:"插件顺序调整失败: "+t.msg,type:"error",duration:5e3}),e.plugins=JSON.parse(h()(e.originalPlugins))),e.loading=!1}).catch(function(t){e.$message({message:"插件顺序调整失败: "+(t.message||"未知错误"),type:"error",duration:5e3}),e.loading=!1,e.plugins=JSON.parse(h()(e.originalPlugins))})}},initData:function(){var e=this;this.getRequest("mydataharbor/plugin/listPlugins").then(function(t){e.allPlugins=t.data["本地存储库"],console.log(e.allPlugins)})},initPlugins:function(){var e=this;this.getRequest("mydataharbor/node/groupList").then(function(t){e.plugins=t.data[e.groupName].installedPlugins,e.originalPlugins=JSON.parse(h()(e.plugins)),e.orderChanged=!1,console.log(e.plugins)})}},S()(C,"tableRowClassName",function(e){e.row;var t=e.rowIndex;if(this.dragging){if(t===this.dropIndex)return"drop-over-row";if(t===this.dragIndex)return"dragging-row"}return""}),S()(C,"handleDragStart",function(e,t){console.log("Drag start",t);var a=this.$refs.multipleTable.$el,o=a.querySelectorAll(".el-table__body tr");if(0!==o.length){this.rowHeight=o[0].offsetHeight,this.dragging=!0,this.dragIndex=t,this.dropIndex=t,this.dragRow=JSON.parse(h()(this.plugins[t])),this.startMouseY=e.clientY;var n=a.querySelector(".el-table__body-wrapper");this.startScrollTop=n?n.scrollTop:0,document.body.style.cursor="move",a.classList.add("dragging"),this.$message({message:"正在拖动插件，松开鼠标完成排序",type:"info",duration:2e3})}}),S()(C,"handleDragMove",function(e){if(this.dragging){var t=this.$refs.multipleTable.$el.querySelector(".el-table__body-wrapper");if(t){var a=t.getBoundingClientRect(),o=e.clientY-a.top+t.scrollTop,n=Math.floor(o/this.rowHeight);n<0&&(n=0),n>=this.plugins.length&&(n=this.plugins.length-1),this.dropIndex!==n&&(console.log("Drop index changed",n),this.dropIndex=n,this.$forceUpdate());e.clientY-a.top<40?t.scrollTop-=5:a.bottom-e.clientY<40&&(t.scrollTop+=5),e.preventDefault(),e.stopPropagation()}}}),S()(C,"handleDragEnd",function(e){if(this.dragging){if(console.log("Drag end",this.dragIndex,this.dropIndex),-1!==this.dragIndex&&-1!==this.dropIndex&&this.dragIndex!==this.dropIndex){var t=this.plugins.splice(this.dragIndex,1)[0];this.plugins.splice(this.dropIndex,0,t),this.orderChanged=!0,this.$message({message:'插件顺序已调整，点击"保存顺序"按钮保存更改',type:"success",duration:3e3})}this.dragging=!1,this.dragRow=null,this.dragIndex=-1,this.dropIndex=-1,document.body.style.cursor="";var a=this.$refs.multipleTable.$el;a&&a.classList.remove("dragging"),this.$forceUpdate(),e&&(e.preventDefault(),e.stopPropagation())}}),S()(C,"unInstallPlugin",function(e){var t=this;console.log("uninstall"+e),this.postRequest("/mydataharbor/node/uninstallPlugin?groupName="+this.groupName+"&pluginId="+e).then(function(e){0==e.code&&(t.$message.info("插件卸载成功！"),t.initPlugins())})}),S()(C,"submit",function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;var a="mydataharbor/node/installPlugin?groupName="+e.form.groupName+"&pluginId="+e.form.pluginId+"&version="+e.form.version+"&sync="+e.form.sync;e.postRequest(a).then(function(t){0==t.code?(e.$message.info("插件安装成功！"),e.initPlugins()):e.$message.error(t.msg)}),e.dialogFormVisible=!1,e.clearData()})}),S()(C,"cancel",function(){this.dialogFormVisible=!1,this.clearData()}),S()(C,"handlePageChange",function(){}),C)},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("安装/升级插件")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"small",disabled:!e.orderChanged,loading:e.loading},on:{click:e.savePluginOrder}},[e._v("保存顺序")])],1),e._v(" "),e.plugins.length>1?a("div",{staticClass:"drag-tip"},[a("i",{staticClass:"el-icon-info"}),e._v(" "),e._m(0)]):e._e(),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.plugins,border:"","header-cell-class-name":"table-header","row-key":"pluginId","row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"drag-handle",attrs:{type:"text",icon:"el-icon-rank"},nativeOn:{mousedown:function(a){return a.preventDefault(),e.handleDragStart(a,t.$index)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"pluginId",label:"插件ID",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"pluginDescription",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本"}}),e._v(" "),a("el-table-column",{attrs:{label:"依赖"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.dependencies,function(t,o){return a("p",{key:o},[e._v("\n          【插件id:"+e._s(t.pluginId)+",版本:"+e._s(t.pluginVersionSupport)+",可选："+e._s(t.optional)+"】\n        ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"provider",label:"提供者"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary",icon:"el-icon-close"},on:{click:function(a){return e.unInstallPlugin(t.row.pluginId)}}},[e._v("卸载")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"插件安装/升级",visible:e.dialogFormVisible,width:"25%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"left"}},[a("el-form-item",{attrs:{label:"组名",hidden:""}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.form.groupName,callback:function(t){e.$set(e.form,"groupName",t)},expression:"form.groupName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"插件ID",prop:"pluginId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择插件id"},model:{value:e.form.pluginId,callback:function(t){e.$set(e.form,"pluginId",t)},expression:"form.pluginId"}},e._l(e.allPlugins,function(t){return a("el-option-group",{key:t.groupName,attrs:{label:t.groupName}},e._l(t.plugins,function(e){return a("el-option",{key:e.pluginId,attrs:{label:e.pluginId,value:e.pluginId}})}),1)}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"插件版本",prop:"version"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择版本"},model:{value:e.form.version,callback:function(t){e.$set(e.form,"version",t)},expression:"form.version"}},e._l(e.allVersion,function(t){return a("el-option",{key:t.version,attrs:{label:t.version,value:t.version}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.version))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.pluginDescription))])])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"同步安装"}},[a("el-switch",{model:{value:e.form.sync,callback:function(t){e.$set(e.form,"sync",t)},expression:"form.sync"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",[this._v("提示：您可以通过拖拽 "),t("i",{staticClass:"el-icon-rank"}),this._v(" 图标来调整插件的顺序")])}]};var I=a("VU/8")(D,_,!1,function(e){a("RHIA")},"data-v-74bf3328",null).exports,w=a("pFYg"),x=a.n(w),z=a("Dd8w"),J=a.n(z),T=a("//Fk"),N=a.n(T),P=a("Gu7T"),F=a.n(P),A=a("Xxa5"),$=a.n(A),V=a("BO1k"),M=a.n(V),L=a("exGp"),j=a.n(L),R=(a("uGPS"),a("L6Z1")),U=a.n(R),O={props:{value:[String,Number,Object,Array],showBtns:[Boolean],expandedOnStart:{type:Boolean,default:!1},mode:{type:String,default:"tree"},modes:{type:Array,default:function(){return["tree","code","form","text","view"]}},lang:{type:String,default:"en"}},watch:{value:{immediate:!0,handler:function(e){var t=this;return j()($.a.mark(function a(){return $.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.internalChange){a.next=5;break}return a.next=3,t.setEditor(e);case 3:t.error=!1,t.expandAll();case 5:case"end":return a.stop()}},a,t)}))()},deep:!0}},data:function(){return{editor:null,error:!1,json:this.value,internalChange:!1,expandedModes:["tree","view","form"],locale:{it:{save:"SALVA"},en:{save:"SAVE"},zh:{save:"保存"}}}},mounted:function(){var e=this,t={mode:this.mode,modes:this.modes,onChange:function(){try{var t=e.editor.get();e.json=t,e.error=!1,e.$emit("json-change",t),e.internalChange=!0,e.$emit("input",t),e.$nextTick(function(){e.internalChange=!1})}catch(t){e.error=!0,e.$emit("has-error",t)}},onModeChange:function(){e.expandAll()}};this.editor=new U.a(this.$el.querySelector(".jsoneditor-vue"),t,this.json)},methods:{expandAll:function(){this.expandedOnStart&&this.expandedModes.includes(this.editor.getMode())&&this.editor.expandAll()},onSave:function(){this.$emit("json-save",this.json)},setEditor:function(e){var t=this;return j()($.a.mark(function a(){return $.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.editor&&t.editor.set(e);case 1:case"end":return a.stop()}},a,t)}))()}}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"jsoneditor-vue"}),e._v(" "),!1!==e.showBtns?a("div",{staticClass:"jsoneditor-btns"},[a("button",{staticClass:"json-save-btn",attrs:{type:"button",disabled:e.error},on:{click:function(t){return e.onSave()}}},[e._v(e._s(e.locale[e.lang].save))])]):e._e()])},staticRenderFns:[]};var E=a("VU/8")(O,q,!1,function(e){a("hV9u")},"data-v-723cff9b",null).exports;a("lHA8"),a("c/Tr");function B(e,t){if(0===arguments.length||null==e)return null;var a=t||"{y}-{m}-{d} {h}:{i}:{s}",o=void 0;"object"===(void 0===e?"undefined":x()(e))?o=e:(10===(""+e).length&&(e=1e3*parseInt(e)),o=new Date(e));var n={y:o.getFullYear(),m:o.getMonth()+1,d:o.getDate(),h:o.getHours(),i:o.getMinutes(),s:o.getSeconds(),a:o.getDay()};return a.replace(/{(y|m|d|h|i|s|a)+}/g,function(e,t){var a=n[t];return"a"===t?["日","一","二","三","四","五","六"][a]:(e.length>0&&a<10&&(a="0"+a),a||0)})}function H(e,t){e=1e3*+e;var a=new Date(e),o=(Date.now()-a)/1e3;return o<30?"刚刚":o<3600?Math.ceil(o/60)+"分钟前":o<86400?Math.ceil(o/3600)+"小时前":o<172800?"1天前":t?B(e,t):a.getMonth()+1+"月"+a.getDate()+"日"+a.getHours()+"时"+a.getMinutes()+"分"}var G={inject:["reload"],name:"Tasks",components:{vueJsonEditor:E},props:["groupName"],data:function(){return{taskList:[],pluginInstallList:[],clazzList:[],dialogFormVisible:!1,taskDetailVisible:!1,dialogUpdateVisible:!1,dialogRecreateUpdateVisible:!1,dialogStateVisible:!1,tableLoading:!1,searchQuery:"",statusFilter:"",filteredTaskList:[],form:{groupName:this.groupName,pluginId:"",taskName:"",mydataharborCreatorClazz:"",totalNumberOfPipeline:1,enableRebalance:!0,enableLoadBalance:!0,settingJsonConfig:{},configJson:{},tags:{}},taskDetailForm:[],detailSettingJsonConfig:{},detailConfigJson:{},detailTags:{},taskAssignedInfo:[],taskState:{created:{zh:"创建",color:""},started:{zh:"启动",color:"success"},suspend:{zh:"暂停",color:"info"},continued:{zh:"继续",color:"warning"},over:{zh:"结束",color:"over"}},states:{created:"创建",started:"启动",suspend:"暂停",continued:"继续",over:"结束"},dialogName:"提交任务",updateForm:{enableRebalance:!0,enableLoadBalance:!0,taskId:"",taskName:"",totalNumberOfPipeline:0,tags:"",groupName:"",pluginId:"",mydataharborCreatorClazz:"",configJson:"",settingJsonConfig:""},recreateUpdateForm:{taskId:"",configJson:{},settingJsonConfig:{},tags:{},mydataharborCreatorClazz:"",groupName:"",taskName:"",totalNumberOfPipeline:"",pluginId:"",enableRebalance:"",enableLoadBalance:""},stateForm:{taskId:"",taskState:""},totalPage:[],pageSize:10,pageTotal:1,dataShow:[],currentPage:0,multipleSelection:[],collapseActiveNames:["settingConfig","taskConfig","tagConfig"],defaultActiveModel:"json",taskConfigDefaultActiveModel:"json",dataSourceActiveModel:"json",protocolDataConverterActiveModel:"json",checkersActiveModel:["json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json","json"],dataConverterActiveModel:"json",dataSinkActiveModel:"json",settingConfigJsonTreeData:[],taskConfigJsonTreeData:[],defaultProps:{children:"fieldInfos",label:"fieldName"},taskMonitorInfos:[],viewFormActiveIndex:1,installDataSourceList:[],selectedDataSourceName:"",selectedDataSource:{},selectedDataSourceConfigJson:[],selectedDataSourceConfigJsonTreeData:[],selectedDataSourceTclassInfoTreeData:[],installProtocolDataConverterList:[],selectedProtocolDataConverterName:"",selectedProtocolDataConverter:{},selectedProtocolDataConverterConfigJson:[],selectedProtocolDataConverterConfigJsonTreeData:[],selectedProtocolDataConverterTclassInfoTreeData:[],selectedProtocolDataConverterPclassInfoTreeData:[],installCheckers:[],selectedCheckerNames:[],selectedCheckers:[],selectedCheckerConfigJsons:[],selectedCheckerConfigJsonTreeDatas:[],selectedCheckerPclassInfoTreeDatas:[],installDataConverters:[],selectedDataConverterName:"",selectedDataConverter:{},selectedDataConverterConfigJson:[],selectedDataConverterConfigJsonTreeData:[],selectedDataConverterPclassInfoTreeData:[],selectedDataConverterRclassInfoTreeData:[],installDataSinkList:[],selectedDataSinkName:"",selectedDataSink:{},selectedDataSinkConfigJson:[],selectedDataSinkConfigJsonTreeData:[],selectedDataSinkRclassInfoTreeData:[],type:""}},watch:{},mounted:function(){this.initData(),this.getTasksByGroupName()},methods:{add:function(){this.dialogFormVisible=!0,this.type="add"},initAllComponent:function(){this.initSelectedDataSource(),this.initselectedProtocolDataConverter(),this.initSelectedCheckers(),this.initSelectedDataConverter(),this.initSelectedDataSink()},initSelectedDataSource:function(){this.selectedDataSourceName="",this.selectedDataSource={},this.selectedDataSourceConfigJson=[],this.selectedDataSourceConfigJsonTreeData=[],this.selectedDataSourceTclassInfoTreeData=[]},initselectedProtocolDataConverter:function(){this.selectedProtocolDataConverterName="",this.selectedProtocolDataConverter={},this.selectedProtocolDataConverterConfigJson=[],this.selectedProtocolDataConverterConfigJsonTreeData=[],this.selectedProtocolDataConverterTclassInfoTreeData=[],this.selectedProtocolDataConverterPclassInfoTreeData=[]},initSelectedCheckers:function(){this.selectedCheckerNames=[],this.selectedCheckers=[],this.selectedCheckerConfigJsons=[],this.selectedCheckerConfigJsonTreeDatas=[],this.selectedCheckerPclassInfoTreeDatas=[]},initSelectedDataConverter:function(){this.selectedDataConverterName="",this.selectedDataConverter={},this.selectedDataConverterConfigJson=[],this.selectedDataConverterConfigJsonTreeData=[],this.selectedDataConverterPclassInfoTreeData=[],this.selectedDataConverterRclassInfoTreeData=[]},initSelectedDataSink:function(){this.selectedDataSinkName="",this.selectedDataSink={},this.selectedDataSinkConfigJson=[],this.selectedDataSinkConfigJsonTreeData=[],this.selectedDataSinkRclassInfoTreeData=[]},dataConverterChange:function(e){var t=this;return j()($.a.mark(function a(){var o,n,r,l,s,i;return $.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(""!=t.selectedProtocolDataConverterName){a.next=4;break}return t.$message("请先选择协议转换器"),t.selectedDataConverterName="",a.abrupt("return");case 4:if(""!=t.selectedDataSinkName){a.next=8;break}return t.$message("请先选择输出源"),t.selectedDataConverterName="",a.abrupt("return");case 8:for(o=!0,n=!1,r=void 0,a.prev=11,l=M()(t.installDataConverters);!(o=(s=l.next()).done);o=!0)(i=s.value).name==e&&(t.selectedDataConverter=i);a.next=19;break;case 15:a.prev=15,a.t0=a.catch(11),n=!0,r=a.t0;case 19:a.prev=19,a.prev=20,!o&&l.return&&l.return();case 22:if(a.prev=22,!n){a.next=25;break}throw r;case 25:return a.finish(22);case 26:return a.finish(19);case 27:if(null==t.selectedDataConverter){a.next=38;break}if(t.selectedDataConverter.pclassInfo.clazzStr==t.selectedProtocolDataConverter.pclassInfo.clazzStr){a.next=31;break}return a.next=31,t.$message({message:"选中的数据转换器输入的数据类型和当前选中的协议转换器输出的数据类型不一致，请确保"+t.selectedProtocolDataConverter.pclassInfo.clazzStr+"是"+t.selectedDataConverter.pclassInfo.clazzStr+"的子类，否则任务将无法执行!",type:"warning",duration:1e4,showClose:!0});case 31:if(t.selectedDataConverter.rclassInfo.clazzStr==t.selectedDataSink.rclassInfo.clazzStr){a.next=34;break}return a.next=34,t.$message({message:"选中的数据转换器输出的数据类型和当前选中的输出源输入的数据类型不一致，请确保"+t.selectedDataConverter.rclassInfo.clazzStr+"是"+t.selectedDataSink.rclassInfo.clazzStr+"的子类，否则任务将无法执行!",type:"warning",duration:1e4,showClose:!0});case 34:t.selectedDataConverterConfigJsonTreeData=t.selectedDataConverter.argsTypeInfo,t.selectedDataConverterTclassInfoTreeData=[t.selectedDataConverter.tclassInfo],t.selectedDataConverterPclassInfoTreeData=[t.selectedDataConverter.pclassInfo],null!=t.selectedDataConverter.argsTypeInfo?t.selectedDataConverterConfigJson=t.buildArgsTypeInfo(t.selectedDataConverter.argsTypeInfo):t.selectedDataConverterConfigJson=[];case 38:console.log(t.selectedDataConverter);case 39:case"end":return a.stop()}},a,t,[[11,15,19,27],[20,,22,26]])}))()},dataSinkChange:function(e){var t=!0,a=!1,o=void 0;try{for(var n,r=M()(this.installDataSinkList);!(t=(n=r.next()).done);t=!0){var l=n.value;l.name==e&&(this.selectedDataSink=l)}}catch(e){a=!0,o=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw o}}null!=this.selectedDataSink&&(this.selectedDataSinkConfigJsonTreeData=this.selectedDataSink.argsTypeInfo,this.selectedDataSinkRclassInfoTreeData=[this.selectedDataSink.rclassInfo],null!=this.selectedDataSink.argsTypeInfo?this.selectedDataSinkConfigJson=this.buildArgsTypeInfo(this.selectedDataSink.argsTypeInfo):this.selectedDataSinkConfigJson=[],this.initSelectedDataConverter()),console.log(this.selectedDataSink)},checkerChange:function(e,t){if(""==this.selectedProtocolDataConverterName)return this.$message("请先选择协议转换器"),void(this.selectedCheckerNames[t]="");var a=!0,o=!1,n=void 0;try{for(var r,l=M()(this.installCheckers);!(a=(r=l.next()).done);a=!0){var s=r.value;s.name==e&&(this.selectedCheckers[t]=s)}}catch(e){o=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw n}}null!=this.selectedCheckers[t]&&(this.selectedCheckers[t].pclassInfo.clazzStr!=this.selectedProtocolDataConverter.pclassInfo.clazzStr&&this.$message({message:"选中的校验器器输入的数据类型和当前选中的协议转换器输出的数据类型不一致，请确保"+this.selectedProtocolDataConverter.pclassInfo.clazzStr+"是"+this.selectedCheckers[t].pclassInfo.clazzStr+"的子类，否则任务将无法执行!",type:"warning",duration:1e4,showClose:!0}),this.selectedCheckerConfigJsonTreeDatas[t]=this.selectedCheckers[t].argsTypeInfo,this.selectedCheckerPclassInfoTreeDatas[t]=[this.selectedCheckers[t].pclassInfo],null!=this.selectedCheckers[t].argsTypeInfo?this.selectedCheckerConfigJsons[t]=this.buildArgsTypeInfo(this.selectedCheckers[t].argsTypeInfo):this.selectedCheckerConfigJsons[t]=[]),console.log(this.selectedCheckers[t])},deleteChecker:function(e){this.selectedCheckerNames.splice(e,1),this.selectedCheckers.splice(e,1),this.selectedCheckerConfigJsons.splice(e,1),this.selectedCheckerConfigJsonTreeDatas.splice(e,1),this.selectedCheckerPclassInfoTreeDatas.splice(e,1)},addChecker:function(){this.selectedCheckerNames.push(""),this.selectedCheckers.push({}),this.selectedCheckerConfigJsons.push([]),this.selectedCheckerConfigJsonTreeDatas.push([]),this.selectedCheckerPclassInfoTreeDatas.push([])},dataSourceChange:function(e){var t=!0,a=!1,o=void 0;try{for(var n,r=M()(this.installDataSourceList);!(t=(n=r.next()).done);t=!0){var l=n.value;l.name==e&&(this.selectedDataSource=l)}}catch(e){a=!0,o=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw o}}null!=this.selectedDataSource&&(this.selectedDataSourceConfigJsonTreeData=this.selectedDataSource.argsTypeInfo,this.selectedDataSourceTclassInfoTreeData=[this.selectedDataSource.tclassInfo],null!=this.selectedDataSource.argsTypeInfo?this.selectedDataSourceConfigJson=this.buildArgsTypeInfo(this.selectedDataSource.argsTypeInfo):this.selectedDataSourceConfigJson=[],this.initselectedProtocolDataConverter()),console.log(this.selectedDataSource)},protocolDataConverterChange:function(e){if(""==this.selectedDataSourceName)return this.$message("请先选择输入源"),void(this.selectedProtocolDataConverterName="");var t=!0,a=!1,o=void 0;try{for(var n,r=M()(this.installProtocolDataConverterList);!(t=(n=r.next()).done);t=!0){var l=n.value;l.name==e&&(this.selectedProtocolDataConverter=l)}}catch(e){a=!0,o=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw o}}null!=this.selectedProtocolDataConverter&&(this.selectedProtocolDataConverter.tclassInfo.clazzStr!=this.selectedDataSource.tclassInfo.clazzStr&&this.$message({message:"协议转换器接受的数据类型和当前选中的输入源输入的数据类型不一致，请确保"+this.selectedDataSource.tclassInfo.clazzStr+"是"+this.selectedProtocolDataConverter.tclassInfo.clazzStr+"的子类，否则任务将无法执行!",type:"warning",duration:1e4,showClose:!0}),this.selectedProtocolDataConverterConfigJsonTreeData=this.selectedProtocolDataConverter.argsTypeInfo,this.selectedProtocolDataConverterTclassInfoTreeData=[this.selectedProtocolDataConverter.tclassInfo],this.selectedProtocolDataConverterPclassInfoTreeData=[this.selectedProtocolDataConverter.pclassInfo],null!=this.selectedProtocolDataConverter.argsTypeInfo?this.selectedProtocolDataConverterConfigJson=this.buildArgsTypeInfo(this.selectedProtocolDataConverter.argsTypeInfo):this.selectedProtocolDataConverterConfigJson=[],this.initSelectedCheckers(),this.initSelectedDataConverter()),console.log(this.selectedProtocolDataConverter)},dateFormat:function(e,t){if(0!=e.lastRunTime){var a=new Date(e.lastRunTime);return a.getFullYear()+"-"+(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-"+(a.getDate()<10?"0"+a.getDate():a.getDate())+" "+(a.getHours()<10?"0"+a.getHours():a.getHours())+":"+(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes())+":"+(a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds())}return"暂无"},compare:function(e){return function(t,a){var o=t[e];return a[e]-o}},clearData:function(){this.form={groupName:this.groupName,pluginId:"",mydataharborCreatorClazz:"",totalNumberOfPipeline:1,enableRebalance:!0,enableLoadBalance:!0,settingJsonConfig:{},configJson:{}},this.taskDetailForm=[],this.dialogName="提交任务"},initData:function(){var e=this;this.taskList=[],this.multipleSelection=[],this.tableLoading=!0,this.postRequest("mydataharbor/task/listTaskByGroup?groupName="+this.groupName).then(function(t){if(0==t.code){var a=t.data,o=function(t){var o=a[t];e.getRequest("mydataharbor/task/getTaskMonitorInfo",{taskId:o.taskId}).then(function(e){0==e.code&&(o.taskMonitorInfo=e.data)}),e.taskList.push(o)};for(var n in a)o(n);e.taskList.sort(e.compare("createTime")),e.filteredTaskList=[].concat(F()(e.taskList)),e.searchQuery||e.statusFilter?e.handleSearch():e.initPageData()}else e.$message.error(t.msg);e.tableLoading=!1}).catch(function(){e.tableLoading=!1,e.$message.error("获取任务列表失败")})},getTasksByGroupName:function(){var e=this;this.tableLoading=!0,this.getRequest("/mydataharbor/node/plugin?groupName="+this.groupName).then(function(t){e.pluginInstallList=t.data,e.initInstallComponentList(),e.tableLoading=!1}).catch(function(){e.tableLoading=!1,e.$message.error("获取插件列表失败")})},handleSearch:function(){var e=this;this.searchQuery||this.statusFilter?this.filteredTaskList=this.taskList.filter(function(t){var a=!e.searchQuery||t.taskId.toLowerCase().includes(e.searchQuery.toLowerCase())||t.taskName&&t.taskName.toLowerCase().includes(e.searchQuery.toLowerCase()),o=!e.statusFilter||t.taskState===e.statusFilter;return a&&o}):this.filteredTaskList=[].concat(F()(this.taskList)),this.pageTotal=this.filteredTaskList.length,this.totalPage={};for(var t=0;t<Math.ceil(this.pageTotal/this.pageSize);t++)this.totalPage[t+1]=this.filteredTaskList.slice(this.pageSize*t,this.pageSize*(t+1));this.handlePageChange(1)},getStatusTooltip:function(e){var t="状态: "+this.states[e.taskState];return"started"===e.taskState&&(t+="\n处理总数: "+this.getTaskTotalCount(e)),t},getTaskProgress:function(e){if(!e||!e.taskMonitorInfo)return 0;var t=this.getTaskTotalCount(e);if(0===t)return 0;var a=e.taskMonitorInfo&&e.taskMonitorInfo.writeSuccessCount||0;return Math.min(Math.round(a/t*100),100)},getTaskTotalCount:function(e){return e&&e.taskMonitorInfo&&e.taskMonitorInfo&&e.taskMonitorInfo.recordCount||0},batchOperation:function(e){var t=this;0!==this.multipleSelection.length?this.$confirm("确定要将选中的"+this.multipleSelection.length+"个任务状态修改为"+this.states[e]+"吗？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=t.multipleSelection.map(function(a){return t.postRequest("mydataharbor/task/manageTaskState?taskId="+a.taskId+"&taskState="+e)});N.a.all(a).then(function(e){var a=e.filter(function(e){return 0===e.code}).length;a>0&&(t.$message.success("成功修改"+a+"个任务的状态"),t.initData());var o=e.length-a;o>0&&t.$message.warning(o+"个任务状态修改失败")})}):this.$message.info("请先选择需要操作的任务！")},initInstallComponentList:function(){for(var e in this.pluginInstallList){var t=this.pluginInstallList[e];for(var a in t.dataPipelineCreatorInfos){var o=t.dataPipelineCreatorInfos[a];if(null!=o.dataSourceClassInfo)for(var n in o.dataSourceClassInfo){var r=o.dataSourceClassInfo[n];for(var l in r.constructorAndArgsConfigs){var s=r.constructorAndArgsConfigs[l],i=t.pluginId+"["+r.clazz+"("+r.title+")]constructor-"+l,c=!1,d=!0,u=!1,p=void 0;try{for(var f,g=M()(this.installDataSourceList);!(d=(f=g.next()).done);d=!0){f.value.name==i&&(c=!0)}}catch(e){u=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(u)throw p}}c||this.installDataSourceList.push({name:i,pluginId:t.pluginId,clazz:r.clazz,argsType:s.argsType,argsTypeInfo:s.argsTypeInfo,tclassInfo:r.tclassInfo})}}if(null!=o.protocolConverterClassInfo)for(var m in o.protocolConverterClassInfo){var h=o.protocolConverterClassInfo[m];for(var v in h.constructorAndArgsConfigs){s=h.constructorAndArgsConfigs[v],i=t.pluginId+"["+h.clazz+"("+h.title+")]constructor-"+v,c=!1;var b=!0,C=!1,y=void 0;try{for(var k,S=M()(this.installProtocolDataConverterList);!(b=(k=S.next()).done);b=!0){k.value.name==i&&(c=!0)}}catch(e){C=!0,y=e}finally{try{!b&&S.return&&S.return()}finally{if(C)throw y}}c||this.installProtocolDataConverterList.push({name:i,pluginId:t.pluginId,clazz:h.clazz,argsType:s.argsType,argsTypeInfo:s.argsTypeInfo,tclassInfo:h.tclassInfo,pclassInfo:h.pclassInfo})}}if(null!=o.checkerClassInfo)for(var D in o.checkerClassInfo){var _=o.checkerClassInfo[D];for(var I in _.constructorAndArgsConfigs){s=_.constructorAndArgsConfigs[I],i=t.pluginId+"["+_.clazz+"("+_.title+")]constructor-"+I,c=!1;var w=!0,x=!1,z=void 0;try{for(var J,T=M()(this.installCheckers);!(w=(J=T.next()).done);w=!0){J.value.name==i&&(c=!0)}}catch(e){x=!0,z=e}finally{try{!w&&T.return&&T.return()}finally{if(x)throw z}}c||this.installCheckers.push({name:i,pluginId:t.pluginId,clazz:_.clazz,argsType:s.argsType,argsTypeInfo:s.argsTypeInfo,pclassInfo:_.pclassInfo})}}if(null!=o.dataConverterClassInfo)for(var N in o.dataConverterClassInfo){var P=o.dataConverterClassInfo[N];for(var F in P.constructorAndArgsConfigs){s=P.constructorAndArgsConfigs[F],i=t.pluginId+"["+P.clazz+"("+P.title+")]constructor-"+F,c=!1;var A=!0,$=!1,V=void 0;try{for(var L,j=M()(this.installDataConverters);!(A=(L=j.next()).done);A=!0){L.value.name==i&&(c=!0)}}catch(e){$=!0,V=e}finally{try{!A&&j.return&&j.return()}finally{if($)throw V}}c||this.installDataConverters.push({name:i,pluginId:t.pluginId,clazz:P.clazz,argsType:s.argsType,argsTypeInfo:s.argsTypeInfo,pclassInfo:P.pclassInfo,rclassInfo:P.rclassInfo})}}if(null!=o.dataSinkClassInfo)for(var R in o.dataSinkClassInfo){var U=o.dataSinkClassInfo[R];for(var O in U.constructorAndArgsConfigs){s=U.constructorAndArgsConfigs[O],i=t.pluginId+"["+U.clazz+"("+U.title+")]constructor-"+O,c=!1;var q=!0,E=!1,B=void 0;try{for(var H,G=M()(this.installDataSinkList);!(q=(H=G.next()).done);q=!0){H.value.name==i&&(c=!0)}}catch(e){E=!0,B=e}finally{try{!q&&G.return&&G.return()}finally{if(E)throw B}}c||this.installDataSinkList.push({name:i,pluginId:t.pluginId,clazz:U.clazz,argsType:s.argsType,argsTypeInfo:s.argsTypeInfo,rclassInfo:U.rclassInfo})}}}}console.log(this.installDataSourceList),console.log(this.installProtocolDataConverterList),console.log(this.installCheckers),console.log(this.installDataConverters),console.log(this.installDataSinkList)},submit:function(){var e=this;this.validateTaskForm()&&this.$confirm("确认提交任务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){e.dialogFormVisible=!1,e.tableLoading=!0;var t=JSON.parse(h()(e.form.configJson)),a=JSON.parse(h()(e.form.settingJsonConfig));t.dataSource&&t.dataSource.argsJsonValue&&(t.dataSource.argsJsonValue=t.dataSource.argsJsonValue.map(function(e){return"string"==typeof e?e:h()(e)})),t.protocolDataConverter&&t.protocolDataConverter.argsJsonValue&&(t.protocolDataConverter.argsJsonValue=t.protocolDataConverter.argsJsonValue.map(function(e){return"string"==typeof e?e:h()(e)})),t.dataCheckers&&t.dataCheckers.length>0&&t.dataCheckers.forEach(function(e){e.argsJsonValue&&(e.argsJsonValue=e.argsJsonValue.map(function(e){return"string"==typeof e?e:h()(e)}))}),t.dataSink&&t.dataSink.argsJsonValue&&(t.dataSink.argsJsonValue=t.dataSink.argsJsonValue.map(function(e){return"string"==typeof e?e:h()(e)})),t.dataConverter&&t.dataConverter.argsJsonValue&&(t.dataConverter.argsJsonValue=t.dataConverter.argsJsonValue.map(function(e){return"string"==typeof e?e:h()(e)})),t.selectedDataSourceConfigJsonTreeData&&delete t.selectedDataSourceConfigJsonTreeData,t.selectedDataSourceTclassInfoTreeData&&delete t.selectedDataSourceTclassInfoTreeData;var o=J()({},e.form,{configJson:h()(t),settingJsonConfig:h()(a)});e.postRequest("mydataharbor/task/submit",o).then(function(t){0==t.code?(e.$message.success({message:"任务提交成功！",duration:2e3}),e.initData(),e.clearData()):e.$message.error(t.msg),e.tableLoading=!1}).catch(function(){e.tableLoading=!1,e.$message.error("任务提交失败，请检查网络连接")})}).catch(function(){})},validateTaskForm:function(){return this.form.taskName?this.form.pluginId?this.form.mydataharborCreatorClazz?!(!this.form.totalNumberOfPipeline||this.form.totalNumberOfPipeline<=0)||(this.$message.warning("管道数必须大于0"),!1):(this.$message.warning("请选择创建器"),!1):(this.$message.warning("请选择插件ID"),!1):(this.$message.warning("请输入任务名称"),!1)},cancel:function(){this.dialogFormVisible=!1,this.taskDetailVisible=!1,this.dialogUpdateVisible=!1,this.dialogStateVisible=!1,this.dialogRecreateUpdateVisible=!1,this.formStepActive=0,this.clearData()},selectPluginId:function(e){var t=this;this.clazzList=[],"add"==this.type?this.form.mydataharborCreatorClazz="":this.recreateUpdateForm.mydataharborCreatorClazz="",this.pluginInstallList.forEach(function(a){a.pluginId==e&&null!=a.dataPipelineCreatorInfos&&a.dataPipelineCreatorInfos.forEach(function(e){e.canCreatePipeline&&t.clazzList.push({clazz:e.clazz,type:e.type})})})},creatorClazzChange:function(e){var t=this;this.form.settingJsonConfig={},this.form.configJson={},""!=e&&this.pluginInstallList.forEach(function(a){a.pluginId==t.form.pluginId&&a.dataPipelineCreatorInfos.forEach(function(a){if(a.clazz==e){a.settingClassInfo.fieldName="root",a.configClassInfo.fieldName="root",t.settingConfigJsonTreeData=[a.settingClassInfo],t.taskConfigJsonTreeData=[a.configClassInfo];var o=!0,n=!1,r=void 0;try{for(var l,s=M()(a.settingClassInfo.fieldInfos);!(o=(l=s.next()).done);o=!0){var i=l.value;t.fillField(t.form.settingJsonConfig,i)}}catch(e){n=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw r}}var c=!0,d=!1,u=void 0;try{for(var p,f=M()(a.configClassInfo.fieldInfos);!(c=(p=f.next()).done);c=!0){var g=p.value;t.fillField(t.form.configJson,g)}}catch(e){d=!0,u=e}finally{try{!c&&f.return&&f.return()}finally{if(d)throw u}}}})})},taskDetail:function(e){var t=this;this.taskDetailForm=[],this.taskAssignedInfo=[];var a=JSON.parse(h()(e));this.detailConfigJson=JSON.parse(e.configJson),this.detailTags=e.tags,this.detailSettingJsonConfig=JSON.parse(e.settingJsonConfig);var o=e.taskAssignedInfo.assignedInfoMap;for(var n in o)this.taskAssignedInfo.push(o[n]);this.getRequest("mydataharbor/task/getTaskMonitorInfo",{taskId:e.taskId}).then(function(e){0==e.code?t.taskMonitorInfos=[e.data]:t.$message.error(e.msg)}),this.taskDetailForm.push(a),this.taskDetailVisible=!0},taskUpdate:function(e){this.updateForm.taskId=e.taskId,this.updateForm.taskName=e.taskName,this.updateForm.totalNumberOfPipeline=e.totalNumberOfPipeline,this.updateForm.enableRebalance=e.enableRebalance,this.updateForm.enableLoadBalance=e.enableLoadBalance,this.updateForm.tags=e.tags,this.dialogUpdateVisible=!0},updateFormSubmit:function(){var e=this;this.postRequest("mydataharbor/task/editTask",this.updateForm).then(function(t){0==t.code?(e.$message.info("任务修改成功！"),e.initData()):e.$message.error(t.msg)}),this.dialogUpdateVisible=!1},taskRecreateUpdate:function(e){var t=this;if(this.recreateUpdateForm.taskId=e.taskId,this.recreateUpdateForm.configJson=JSON.parse(e.configJson),this.recreateUpdateForm.tags=e.tags,this.recreateUpdateForm.settingJsonConfig=JSON.parse(e.settingJsonConfig),this.recreateUpdateForm.groupName=e.groupName,this.recreateUpdateForm.pluginId=e.pluginId,this.recreateUpdateForm.mydataharborCreatorClazz=e.mydataharborCreatorClazz,this.recreateUpdateForm.taskName=e.taskName,this.recreateUpdateForm.totalNumberOfPipeline=e.totalNumberOfPipeline,this.recreateUpdateForm.enableRebalance=e.enableRebalance,this.recreateUpdateForm.enableLoadBalance=e.enableLoadBalance,this.selectPluginId(e.pluginId),this.initAllComponent(),""!=e.mydataharborCreatorClazz){this.recreateUpdateForm.mydataharborCreatorClazz=e.mydataharborCreatorClazz;var a=JSON.parse(h()(this.recreateUpdateForm.configJson)),o=JSON.parse(h()(this.recreateUpdateForm.settingJsonConfig));this.pluginInstallList.forEach(function(n){n.pluginId==t.recreateUpdateForm.pluginId&&n.dataPipelineCreatorInfos.forEach(function(n){if(n.clazz==e.mydataharborCreatorClazz){n.settingClassInfo.fieldName="root",n.configClassInfo.fieldName="root",t.settingConfigJsonTreeData=[n.settingClassInfo],t.taskConfigJsonTreeData=[n.configClassInfo];var r=!0,l=!1,s=void 0;try{for(var i,c=M()(n.settingClassInfo.fieldInfos);!(r=(i=c.next()).done);r=!0){var d=i.value;t.fillField(t.recreateUpdateForm.settingJsonConfig,d)}}catch(e){l=!0,s=e}finally{try{!r&&c.return&&c.return()}finally{if(l)throw s}}var u=!0,p=!1,f=void 0;try{for(var g,m=M()(n.configClassInfo.fieldInfos);!(u=(g=m.next()).done);u=!0){var h=g.value;t.fillField(t.recreateUpdateForm.configJson,h)}}catch(e){p=!0,f=e}finally{try{!u&&m.return&&m.return()}finally{if(p)throw f}}t.recreateUpdateForm.configJson=t.mergeConfigs(t.recreateUpdateForm.configJson,a),t.recreateUpdateForm.settingJsonConfig=t.mergeConfigs(t.recreateUpdateForm.settingJsonConfig,o)}})})}this.type="addAndDelJob",this.dialogRecreateUpdateVisible=!0;var n=this.recreateUpdateForm.configJson;if(n.dataSource){var r=!0,l=!1,s=void 0;try{for(var i,c=M()(this.installDataSourceList);!(r=(i=c.next()).done);r=!0){var d=i.value;if(d.clazz===n.dataSource.clazz&&d.pluginId===n.dataSource.pluginId){this.selectedDataSourceName=d.name,this.selectedDataSource=d;break}}}catch(e){l=!0,s=e}finally{try{!r&&c.return&&c.return()}finally{if(l)throw s}}if(n.dataSource.argsJsonValue&&n.dataSource.argsJsonValue.length>0)try{this.selectedDataSourceConfigJson=n.dataSource.argsJsonValue.map(function(e){return"string"==typeof e?JSON.parse(e):e})}catch(e){console.error("解析数据源参数失败:",e),this.selectedDataSourceConfigJson=[]}}if(n.protocolDataConverter){var u=!0,p=!1,f=void 0;try{for(var g,m=M()(this.installProtocolDataConverterList);!(u=(g=m.next()).done);u=!0){var v=g.value;if(v.clazz===n.protocolDataConverter.clazz&&v.pluginId===n.protocolDataConverter.pluginId){this.selectedProtocolDataConverterName=v.name,this.selectedProtocolDataConverter=v;break}}}catch(e){p=!0,f=e}finally{try{!u&&m.return&&m.return()}finally{if(p)throw f}}if(n.protocolDataConverter.argsJsonValue&&n.protocolDataConverter.argsJsonValue.length>0)try{this.selectedProtocolDataConverterConfigJson=n.protocolDataConverter.argsJsonValue.map(function(e){return"string"==typeof e?JSON.parse(e):e})}catch(e){console.error("解析协议转换器参数失败:",e),this.selectedProtocolDataConverterConfigJson=[]}}if(n.dataCheckers&&n.dataCheckers.length>0&&(this.selectedCheckerNames=[],this.selectedCheckers=[],this.selectedCheckerConfigJsons=[],n.dataCheckers.forEach(function(e,a){var o=!0,n=!1,r=void 0;try{for(var l,s=M()(t.installCheckers);!(o=(l=s.next()).done);o=!0){var i=l.value;if(i.clazz===e.clazz&&i.pluginId===e.pluginId){if(t.selectedCheckerNames.push(i.name),t.selectedCheckers.push(i),e.argsJsonValue&&e.argsJsonValue.length>0)try{var c=e.argsJsonValue.map(function(e){return"string"==typeof e?JSON.parse(e):e});t.selectedCheckerConfigJsons.push(c)}catch(e){console.error("解析检查器参数失败:",e),t.selectedCheckerConfigJsons.push([])}else t.selectedCheckerConfigJsons.push([]);break}}}catch(e){n=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw r}}})),n.dataSink){var b=!0,C=!1,y=void 0;try{for(var k,S=M()(this.installDataSinkList);!(b=(k=S.next()).done);b=!0){var D=k.value;if(D.clazz===n.dataSink.clazz&&D.pluginId===n.dataSink.pluginId){this.selectedDataSinkName=D.name,this.selectedDataSink=D;break}}}catch(e){C=!0,y=e}finally{try{!b&&S.return&&S.return()}finally{if(C)throw y}}if(n.dataSink.argsJsonValue&&n.dataSink.argsJsonValue.length>0)try{this.selectedDataSinkConfigJson=n.dataSink.argsJsonValue.map(function(e){return"string"==typeof e?JSON.parse(e):e})}catch(e){console.error("解析数据输出源参数失败:",e),this.selectedDataSinkConfigJson=[]}}if(n.dataConverter){var _=!0,I=!1,w=void 0;try{for(var x,z=M()(this.installDataConverters);!(_=(x=z.next()).done);_=!0){var J=x.value;if(J.clazz===n.dataConverter.clazz&&J.pluginId===n.dataConverter.pluginId){this.selectedDataConverterName=J.name,this.selectedDataConverter=J;break}}}catch(e){I=!0,w=e}finally{try{!_&&z.return&&z.return()}finally{if(I)throw w}}if(n.dataConverter.argsJsonValue&&n.dataConverter.argsJsonValue.length>0)try{this.selectedDataConverterConfigJson=n.dataConverter.argsJsonValue.map(function(e){return"string"==typeof e?JSON.parse(e):e})}catch(e){console.error("解析数据转换器参数失败:",e),this.selectedDataConverterConfigJson=[]}}},recreateUpdateFormSubmit:function(){var e=this,t=JSON.parse(h()(this.recreateUpdateForm.configJson)),a=JSON.parse(h()(this.recreateUpdateForm.settingJsonConfig));t.dataSource&&t.dataSource.argsJsonValue&&(t.dataSource.argsJsonValue=t.dataSource.argsJsonValue.map(function(e){return"string"==typeof e?e:h()(e)})),t.protocolDataConverter&&t.protocolDataConverter.argsJsonValue&&(t.protocolDataConverter.argsJsonValue=t.protocolDataConverter.argsJsonValue.map(function(e){return"string"==typeof e?e:h()(e)})),t.dataCheckers&&t.dataCheckers.length>0&&t.dataCheckers.forEach(function(e){e.argsJsonValue&&(e.argsJsonValue=e.argsJsonValue.map(function(e){return"string"==typeof e?e:h()(e)}))}),t.dataSink&&t.dataSink.argsJsonValue&&(t.dataSink.argsJsonValue=t.dataSink.argsJsonValue.map(function(e){return"string"==typeof e?e:h()(e)})),t.dataConverter&&t.dataConverter.argsJsonValue&&(t.dataConverter.argsJsonValue=t.dataConverter.argsJsonValue.map(function(e){return"string"==typeof e?e:h()(e)})),t.selectedDataSourceConfigJsonTreeData&&delete t.selectedDataSourceConfigJsonTreeData,t.selectedDataSourceTclassInfoTreeData&&delete t.selectedDataSourceTclassInfoTreeData;var o=J()({},this.recreateUpdateForm,{configJson:h()(t),settingJsonConfig:h()(a)});this.postRequest("mydataharbor/task/recreateTask",o).then(function(t){0==t.code?(e.$message.info("任务重建成功！"),e.initData()):e.$message.error(t.msg)}),this.dialogRecreateUpdateVisible=!1},taskFork:function(e){var t=this;if(this.dialogName="复制任务",this.form=JSON.parse(h()(e)),this.form.configJson=JSON.parse(e.configJson),this.form.settingJsonConfig=JSON.parse(e.settingJsonConfig),this.form.taskId="",this.dialogFormVisible=!0,this.formStepActive=0,this.selectPluginId(e.pluginId),this.initAllComponent(),""!=e.mydataharborCreatorClazz){this.form.mydataharborCreatorClazz=e.mydataharborCreatorClazz;var a=JSON.parse(h()(this.form.configJson)),o=JSON.parse(h()(this.form.settingJsonConfig));this.pluginInstallList.forEach(function(n){n.pluginId==t.form.pluginId&&n.dataPipelineCreatorInfos.forEach(function(n){if(n.clazz==e.mydataharborCreatorClazz){n.settingClassInfo.fieldName="root",n.configClassInfo.fieldName="root",t.settingConfigJsonTreeData=[n.settingClassInfo],t.taskConfigJsonTreeData=[n.configClassInfo];var r=!0,l=!1,s=void 0;try{for(var i,c=M()(n.settingClassInfo.fieldInfos);!(r=(i=c.next()).done);r=!0){var d=i.value;t.fillField(t.form.settingJsonConfig,d)}}catch(e){l=!0,s=e}finally{try{!r&&c.return&&c.return()}finally{if(l)throw s}}var u=!0,p=!1,f=void 0;try{for(var g,m=M()(n.configClassInfo.fieldInfos);!(u=(g=m.next()).done);u=!0){var h=g.value;t.fillField(t.form.configJson,h)}}catch(e){p=!0,f=e}finally{try{!u&&m.return&&m.return()}finally{if(p)throw f}}t.form.configJson=t.mergeConfigs(t.form.configJson,a),t.form.settingJsonConfig=t.mergeConfigs(t.form.settingJsonConfig,o)}})})}var n=this.form.configJson;if(n.dataSource){var r=!0,l=!1,s=void 0;try{for(var i,c=M()(this.installDataSourceList);!(r=(i=c.next()).done);r=!0){var d=i.value;if(d.clazz===n.dataSource.clazz&&d.pluginId===n.dataSource.pluginId){this.selectedDataSourceName=d.name,this.selectedDataSource=d;break}}}catch(e){l=!0,s=e}finally{try{!r&&c.return&&c.return()}finally{if(l)throw s}}if(n.dataSource.argsJsonValue&&n.dataSource.argsJsonValue.length>0)try{this.selectedDataSourceConfigJson=n.dataSource.argsJsonValue.map(function(e){return"string"==typeof e?JSON.parse(e):e})}catch(e){console.error("解析数据源参数失败:",e),this.selectedDataSourceConfigJson=[]}}if(n.protocolDataConverter){var u=!0,p=!1,f=void 0;try{for(var g,m=M()(this.installProtocolDataConverterList);!(u=(g=m.next()).done);u=!0){var v=g.value;if(v.clazz===n.protocolDataConverter.clazz&&v.pluginId===n.protocolDataConverter.pluginId){this.selectedProtocolDataConverterName=v.name,this.selectedProtocolDataConverter=v;break}}}catch(e){p=!0,f=e}finally{try{!u&&m.return&&m.return()}finally{if(p)throw f}}if(n.protocolDataConverter.argsJsonValue&&n.protocolDataConverter.argsJsonValue.length>0)try{this.selectedProtocolDataConverterConfigJson=n.protocolDataConverter.argsJsonValue.map(function(e){return"string"==typeof e?JSON.parse(e):e})}catch(e){console.error("解析协议转换器参数失败:",e),this.selectedProtocolDataConverterConfigJson=[]}}if(n.dataCheckers&&n.dataCheckers.length>0&&(this.selectedCheckerNames=[],this.selectedCheckers=[],this.selectedCheckerConfigJsons=[],n.dataCheckers.forEach(function(e,a){var o=!0,n=!1,r=void 0;try{for(var l,s=M()(t.installCheckers);!(o=(l=s.next()).done);o=!0){var i=l.value;if(i.clazz===e.clazz&&i.pluginId===e.pluginId){if(t.selectedCheckerNames.push(i.name),t.selectedCheckers.push(i),e.argsJsonValue&&e.argsJsonValue.length>0)try{var c=e.argsJsonValue.map(function(e){return"string"==typeof e?JSON.parse(e):e});t.selectedCheckerConfigJsons.push(c)}catch(e){console.error("解析检查器参数失败:",e),t.selectedCheckerConfigJsons.push([])}else t.selectedCheckerConfigJsons.push([]);break}}}catch(e){n=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(n)throw r}}})),n.dataSink){var b=!0,C=!1,y=void 0;try{for(var k,S=M()(this.installDataSinkList);!(b=(k=S.next()).done);b=!0){var D=k.value;if(D.clazz===n.dataSink.clazz&&D.pluginId===n.dataSink.pluginId){this.selectedDataSinkName=D.name,this.selectedDataSink=D;break}}}catch(e){C=!0,y=e}finally{try{!b&&S.return&&S.return()}finally{if(C)throw y}}if(n.dataSink.argsJsonValue&&n.dataSink.argsJsonValue.length>0)try{this.selectedDataSinkConfigJson=n.dataSink.argsJsonValue.map(function(e){return"string"==typeof e?JSON.parse(e):e})}catch(e){console.error("解析数据输出源参数失败:",e),this.selectedDataSinkConfigJson=[]}}if(n.dataConverter){var _=!0,I=!1,w=void 0;try{for(var x,z=M()(this.installDataConverters);!(_=(x=z.next()).done);_=!0){var J=x.value;if(J.clazz===n.dataConverter.clazz&&J.pluginId===n.dataConverter.pluginId){this.selectedDataConverterName=J.name,this.selectedDataConverter=J;break}}}catch(e){I=!0,w=e}finally{try{!_&&z.return&&z.return()}finally{if(I)throw w}}if(n.dataConverter.argsJsonValue&&n.dataConverter.argsJsonValue.length>0)try{this.selectedDataConverterConfigJson=n.dataConverter.argsJsonValue.map(function(e){return"string"==typeof e?JSON.parse(e):e})}catch(e){console.error("解析数据转换器参数失败:",e),this.selectedDataConverterConfigJson=[]}}this.type="add"},taskStates:function(e){this.stateForm.taskId=e.taskId,this.stateForm.taskState=e.taskState,this.dialogStateVisible=!0},taskDelete:function(e){var t=this;this.$confirm("是否永久删除该任务："+e.taskId,"确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){t.postRequest("/mydataharbor/task/deleteTask?taskId="+e.taskId).then(function(e){0==e.code?t.$message({type:"info",message:"删除成功！"}):t.$message({type:"warning",message:"删除失败！"+e.msg})}),t.initData()})},updateStateFormSubmit:function(){var e=this;this.postRequest("mydataharbor/task/manageTaskState?taskId="+this.stateForm.taskId+"&taskState="+this.stateForm.taskState).then(function(t){0==t.code?(e.$message.info("任务状态修改成功！"),e.initData()):e.$message.error(t.msg)}),this.dialogStateVisible=!1},initPageData:function(){var e=this.filteredTaskList||this.taskList;this.pageTotal=e.length,this.totalPage={};for(var t=0;t<Math.ceil(this.pageTotal/this.pageSize);t++)this.totalPage[t+1]=e.slice(this.pageSize*t,this.pageSize*(t+1));this.handlePageChange(1)},handlePageChange:function(e){this.currentPage=e,this.dataShow=this.totalPage[this.currentPage]},handleSizeChange:function(e){this.pageSize=e,this.initPageData()},handleSelectionChange:function(e){this.multipleSelection=e},batchDelete:function(){var e=this;if(console.log(this.multipleSelection),0!=this.multipleSelection.length){var t=0;this.$confirm("是否永久删除已选的"+this.multipleSelection.length+"条数据","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){e.multipleSelection.forEach(function(a){e.postRequest("/mydataharbor/task/deleteTask?taskId="+a.taskId).then(function(a){0==a.code?(t+=1)==e.multipleSelection.length&&e.$message({type:"info",message:"成功删除"+t+"条数据！"}):e.$message.error(a.msg)})}),e.reload()})}else this.$message.info("当前未选择任务任务数据，请先勾选需要删除的数据！")},renderTreeContent:function(e,t){t.node;var a=t.data;t.store;return e("span",{class:"custom-tree-node"},[e("span",[a.fieldName," ",a.title," 【类型:",a.clazzStr,"】【",1==a.array?"数组":1==a.map?"map":1==a.baseType?"基础类型":"对象","】",1==a.enumeration?"【枚举】候选值:"+h()(a.candidateValue):"",1==a.require?"【必须】":"【非必须】",null!=a.defaultValue&&""!=a.defaultValue?"【默认值："+a.defaultValue+"】":"",a.des])])},fillField:function(e,t){if(t.require&&(t.array?e[t.fieldName]=[]:t.map?e[t.fieldName]={}:t.baseType?e[t.fieldName]=t.defaultValue:e[t.fieldName]={},null!=t.fieldInfos&&t.fieldInfos.length>0)){var a=!0,o=!1,n=void 0;try{for(var r,l=M()(t.fieldInfos);!(a=(r=l.next()).done);a=!0){var s=r.value;this.fillField(e[t.fieldName],s)}}catch(e){o=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw n}}}},buildArgsTypeInfo:function(e){var t=[],a=!0,o=!1,n=void 0;try{for(var r,l=M()(e);!(a=(r=l.next()).done);a=!0){var s=r.value,i={};if(s.array?i=[]:s.map?i={}:s.baseType&&(i=null==s.defaultValue?"":s.defaultValue),null!=s.fieldInfos&&s.fieldInfos.length>0){var c=!0,d=!1,u=void 0;try{for(var p,f=M()(s.fieldInfos);!(c=(p=f.next()).done);c=!0){var g=p.value;this.fillField(i,g)}}catch(e){d=!0,u=e}finally{try{!c&&f.return&&f.return()}finally{if(d)throw u}}}t.push(i)}}catch(e){o=!0,n=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw n}}return t},viewFormNext:function(){if(1==this.viewFormActiveIndex){if(""==this.selectedDataSourceName)return void this.$message({message:"请选择输入源",type:"warning",duration:2e3,showClose:!0});if(""==this.selectedProtocolDataConverterName)return void this.$message({message:"请选择协议转换器",type:"warning",duration:2e3,showClose:!0})}else if(2==this.viewFormActiveIndex){console.log(this.selectedCheckerNames);var e=!0,t=!1,a=void 0;try{for(var o,n=M()(this.selectedCheckerNames);!(e=(o=n.next()).done);e=!0){if(""==o.value)return void this.$message({message:"请配置过滤器，如不需要请删除",type:"warning",duration:2e3,showClose:!0})}}catch(e){t=!0,a=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw a}}}else if(3==this.viewFormActiveIndex&&""==this.selectedDataSinkName)return void this.$message({message:"请选择输出源",type:"warning",duration:2e3,showClose:!0});this.viewFormActiveIndex++},viewFormPre:function(){this.viewFormActiveIndex--},viewFormConfirm:function(){if(""!=this.selectedDataConverterName){console.log(this.selectedDataSource);var e="";(e="add"==this.type?JSON.parse(h()(this.form.configJson)):"addAndDelJob"==this.type?JSON.parse(h()(this.recreateUpdateForm.configJson)):JSON.parse(h()(this.updateForm.configJson))).dataSource.pluginId=this.selectedDataSource.pluginId,e.dataSource.clazz=this.selectedDataSource.clazz,e.dataSource.argsType=null==this.selectedDataSource.argsType?[]:this.selectedDataSource.argsType,e.dataSource.argsJsonValue=[],console.log(h()(this.selectedDataSourceConfigJson));var t=!0,a=!1,o=void 0;try{for(var n,r=M()(this.selectedDataSourceConfigJson);!(t=(n=r.next()).done);t=!0){var l=n.value;e.dataSource.argsJsonValue.push(h()(l))}}catch(e){a=!0,o=e}finally{try{!t&&r.return&&r.return()}finally{if(a)throw o}}e.protocolDataConverter.pluginId=this.selectedProtocolDataConverter.pluginId,e.protocolDataConverter.clazz=this.selectedProtocolDataConverter.clazz,e.protocolDataConverter.argsType=null==this.selectedProtocolDataConverter.argsType?[]:this.selectedProtocolDataConverter.argsType,e.protocolDataConverter.argsJsonValue=[];var s=!0,i=!1,c=void 0;try{for(var d,u=M()(this.selectedProtocolDataConverterConfigJson);!(s=(d=u.next()).done);s=!0){l=d.value;e.protocolDataConverter.argsJsonValue.push(h()(l))}}catch(e){i=!0,c=e}finally{try{!s&&u.return&&u.return()}finally{if(i)throw c}}for(var p=0;p<this.selectedCheckers.length;p++){var f=this.selectedCheckers[p],g=[],m=!0,v=!1,b=void 0;try{for(var C,y=M()(this.selectedCheckerConfigJsons[p]);!(m=(C=y.next()).done);m=!0){l=C.value;g.push(h()(l))}}catch(e){v=!0,b=e}finally{try{!m&&y.return&&y.return()}finally{if(v)throw b}}e.dataCheckers.push({pluginId:f.pluginId,clazz:f.clazz,argsType:null==f.argsType?[]:f.argsType,argsJsonValue:g})}e.dataConverter.pluginId=this.selectedDataConverter.pluginId,e.dataConverter.clazz=this.selectedDataConverter.clazz,e.dataConverter.argsType=null==this.selectedDataConverter.argsType?[]:this.selectedDataConverter.argsType,e.dataConverter.argsJsonValue=[];var k=!0,S=!1,D=void 0;try{for(var _,I=M()(this.selectedDataConverterConfigJson);!(k=(_=I.next()).done);k=!0){l=_.value;e.dataConverter.argsJsonValue.push(h()(l))}}catch(e){S=!0,D=e}finally{try{!k&&I.return&&I.return()}finally{if(S)throw D}}e.dataSink.pluginId=this.selectedDataSink.pluginId,e.dataSink.clazz=this.selectedDataSink.clazz,e.dataSink.argsType=null==this.selectedDataSink.argsType?[]:this.selectedDataSink.argsType,e.dataSink.argsJsonValue=[];var w=!0,x=!1,z=void 0;try{for(var J,T=M()(this.selectedDataSinkConfigJson);!(w=(J=T.next()).done);w=!0){l=J.value;e.dataSink.argsJsonValue.push(h()(l))}}catch(e){x=!0,z=e}finally{try{!w&&T.return&&T.return()}finally{if(x)throw z}}"add"==this.type?this.form.configJson=e:"addAndDelJob"==this.type?this.recreateUpdateForm.configJson=e:this.updateForm.configJson=e,this.taskConfigDefaultActiveModel="json"}else this.$message({message:"请选择数据转换器",type:"warning",duration:2e3,showClose:!0})},handleCommand:function(e,t){switch(e){case"update":this.taskUpdate(t);break;case"recreate":this.taskRecreateUpdate(t);break;case"fork":this.taskFork(t);break;case"state":this.taskStates(t);break;case"start":this.quickChangeState(t,"started");break;case"suspend":this.quickChangeState(t,"suspend");break;case"delete":this.taskDelete(t)}},quickChangeState:function(e,t){var a=this;this.$confirm('确定要将任务 "'+(e.taskName||e.taskId)+'" 的状态修改为'+this.states[t]+"吗？","确认信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.tableLoading=!0,a.postRequest("mydataharbor/task/manageTaskState?taskId="+e.taskId+"&taskState="+t).then(function(e){0==e.code?(a.$message.success("任务状态修改成功！"),a.initData()):a.$message.error(e.msg),a.tableLoading=!1}).catch(function(){a.tableLoading=!1,a.$message.error("状态修改失败，请检查网络连接")})})},recreateClose:function(){this.type=""},mergeConfigs:function(e,t){if(!t||"object"!==(void 0===t?"undefined":x()(t)))return e;if(!e||"object"!==(void 0===e?"undefined":x()(e)))return t;var a=J()({},e);for(var o in t)t.hasOwnProperty(o)&&(null===t[o]||"object"!==x()(t[o])||Array.isArray(t[o])||!a.hasOwnProperty(o)||null===a[o]||"object"!==x()(a[o])||Array.isArray(a[o])?a[o]=t[o]:a[o]=this.mergeConfigs(a[o],t[o]));return a}}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.add()}}},[e._v("提交任务")]),e._v(" "),a("el-button-group",[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.batchDelete()}}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{type:"warning",size:"small",disabled:!e.multipleSelection.length},on:{click:function(t){return e.batchOperation("suspend")}}},[e._v("批量暂停")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"small",disabled:!e.multipleSelection.length},on:{click:function(t){return e.batchOperation("started")}}},[e._v("批量启动")])],1)],1),e._v(" "),a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"搜索任务ID或名称",size:"small",clearable:""},on:{input:e.handleSearch},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),e._v(" "),a("el-select",{attrs:{placeholder:"状态过滤",size:"small",clearable:""},on:{change:e.handleSearch},model:{value:e.statusFilter,callback:function(t){e.statusFilter=t},expression:"statusFilter"}},e._l(e.states,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})}),1)],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.dataShow,border:"",width:"100%","header-cell-class-name":"table-header","element-loading-text":"加载中..."},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskId",label:"任务ID",width:"240",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"任务名",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[void 0!=t.row.taskName?a("span",[e._v(e._s(t.row.taskName))]):a("span",[e._v("null")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100",prop:"taskState"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:e.getStatusTooltip(t.row),placement:"top"}},[a("div",[a("el-tag",{attrs:{type:e.taskState[t.row.taskState].color,size:"small"}},[e._v("\n              "+e._s(e.taskState[t.row.taskState].zh)+"\n            ")]),e._v(" "),"started"===t.row.taskState?a("el-progress",{staticStyle:{"margin-top":"5px"},attrs:{percentage:e.getTaskProgress(t.row),"stroke-width":5,"show-text":!1}}):e._e()],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"pluginId",label:"插件ID",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"mydataharborCreatorClazz",label:"创建器"}}),e._v(" "),a("el-table-column",{attrs:{label:"故障转移",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.enableRebalance?a("el-tag",{attrs:{size:"small"}},[e._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("false")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"负载均衡",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.enableLoadBalance?a("el-tag",{attrs:{size:"small"}},[e._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("false")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"totalNumberOfPipeline",label:"管道数",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"144",prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("parseTime")(t.row.createTime,"{y}-{m}-{d} {h}:{i}")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间",width:"144",prop:"lastUpdateTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("parseTime")(t.row.lastUpdateTime,"{y}-{m}-{d} {h}:{i}")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"tags",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[void 0!=t.row.tags?a("span",[e._v(e._s(t.row.tags))]):a("span",[e._v("null")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{"split-button":"",type:"primary",size:"mini"},on:{click:function(a){return e.taskDetail(t.row)},command:function(a){return e.handleCommand(a,t.row)}}},[e._v("\n          详情\n          "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"update"}},[e._v("修改")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"recreate",divided:""}},[e._v("重建")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"fork"}},[e._v("复制")]),e._v(" "),a("el-dropdown-item",{attrs:{command:"state",divided:""}},[e._v("状态管理")]),e._v(" "),"started"!==t.row.taskState?a("el-dropdown-item",{attrs:{command:"start"}},[e._v("启动")]):e._e(),e._v(" "),"started"===t.row.taskState?a("el-dropdown-item",{attrs:{command:"suspend"}},[e._v("暂停")]):e._e(),e._v(" "),a("el-dropdown-item",{staticStyle:{color:"#F56C6C"},attrs:{command:"delete",divided:""}},[e._v("删除")])],1)],1)]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,50,100],"page-size":e.pageSize,total:e.pageTotal,background:"",layout:"sizes, total, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogName,visible:e.dialogFormVisible,width:"80%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.recreateClose}},[a("el-form",{attrs:{model:e.form,"label-position":"left","label-width":"70px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"组名"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",size:"small",disabled:""},model:{value:e.form.groupName,callback:function(t){e.$set(e.form,"groupName",t)},expression:"form.groupName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"任务名"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入任务名",autocomplete:"off",size:"small"},model:{value:e.form.taskName,callback:function(t){e.$set(e.form,"taskName",t)},expression:"form.taskName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"管道数"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",size:"small"},model:{value:e.form.totalNumberOfPipeline,callback:function(t){e.$set(e.form,"totalNumberOfPipeline",t)},expression:"form.totalNumberOfPipeline"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"插件ID",prop:"pluginId"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择组件ID",size:"small"},on:{change:e.selectPluginId},model:{value:e.form.pluginId,callback:function(t){e.$set(e.form,"pluginId",t)},expression:"form.pluginId"}},e._l(e.pluginInstallList,function(e){return a("el-option",{key:e.id,attrs:{label:e.pluginId,value:e.pluginId}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"创建器"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择CreatorClazz",size:"small"},on:{change:e.creatorClazzChange},model:{value:e.form.mydataharborCreatorClazz,callback:function(t){e.$set(e.form,"mydataharborCreatorClazz",t)},expression:"form.mydataharborCreatorClazz"}},e._l(e.clazzList,function(e){return a("el-option",{key:e.id,attrs:{label:e.type+e.clazz,value:e.clazz}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"故障转移"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择是否设置故障转移",size:"small"},model:{value:e.form.enableRebalance,callback:function(t){e.$set(e.form,"enableRebalance",t)},expression:"form.enableRebalance"}},[a("el-option",{attrs:{label:"true",value:"true"}}),e._v(" "),a("el-option",{attrs:{label:"false",value:"false"}})],1)],1),e._v(" "),a("el-alert",{staticStyle:{"margin-top":"-20px"},attrs:{title:"值为false，节点停机，任务将不会自动转移！但是会有告警信息发出，适合不能重复运行的任务",type:"info","show-icon":""}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"负载均衡"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择是否设置负载均衡",size:"small"},model:{value:e.form.enableLoadBalance,callback:function(t){e.$set(e.form,"enableLoadBalance",t)},expression:"form.enableLoadBalance"}},[a("el-option",{attrs:{label:"true",value:"true"}}),e._v(" "),a("el-option",{attrs:{label:"false",value:"false"}})],1)],1),e._v(" "),a("el-alert",{staticStyle:{"margin-top":"-20px"},attrs:{title:"当集群内有节点加入时，开启负载均衡的任务有可能会被重新分配到其他节点（任务会被有中断的过程），以便分散压力，如果不希望任务随意被停止转移请设置为false",type:"info","show-icon":""}})],1)],1)],1),e._v(" "),a("el-collapse",{model:{value:e.collapseActiveNames,callback:function(t){e.collapseActiveNames=t},expression:"collapseActiveNames"}},[a("el-collapse-item",{attrs:{title:"settingContextConfig",name:"settingConfig"}},[a("el-tabs",{model:{value:e.defaultActiveModel,callback:function(t){e.defaultActiveModel=t},expression:"defaultActiveModel"}},[a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.form.settingJsonConfig,callback:function(t){e.$set(e.form,"settingJsonConfig",t)},expression:"form.settingJsonConfig"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.settingConfigJsonTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1),e._v(" "),a("el-collapse-item",{attrs:{title:"taskConfig",name:"taskConfig"}},[a("el-tabs",{model:{value:e.taskConfigDefaultActiveModel,callback:function(t){e.taskConfigDefaultActiveModel=t},expression:"taskConfigDefaultActiveModel"}},["mydataharbor.system.plugin.creator.CommonPipelineCreator"==e.form.mydataharborCreatorClazz?a("el-tab-pane",{attrs:{label:"pipeline可视化配置",name:"viewForm"}},[a("el-steps",{attrs:{active:e.viewFormActiveIndex}},[a("el-step",{attrs:{title:"配置输入源",description:"选择并配置数据源和相应的协议转换器"}}),e._v(" "),a("el-step",{attrs:{title:"配置检查器",description:"可以配置多个检查器将不符合要求的协议数据过滤掉"}}),e._v(" "),a("el-step",{attrs:{title:"配置输出源",description:"选择要写入的目标数据源并配置参数"}}),e._v(" "),a("el-step",{attrs:{title:"配置数据转换器",description:"选择合适的数据转换器，这个步骤大部分是需要自己写代码的地方，当然也可以选择通用的数据转换器比如GroovyDataConverter"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.viewFormActiveIndex,expression:"viewFormActiveIndex == 1"}],staticStyle:{"margin-top":"10px"}},[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"选择输入源"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择数据源"},on:{change:e.dataSourceChange},model:{value:e.selectedDataSourceName,callback:function(t){e.selectedDataSourceName=t},expression:"selectedDataSourceName"}},e._l(e.installDataSourceList,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1),e._v(" "),a("el-tabs",{model:{value:e.dataSourceActiveModel,callback:function(t){e.dataSourceActiveModel=t},expression:"dataSourceActiveModel"}},[a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.selectedDataSourceConfigJson,callback:function(t){e.selectedDataSourceConfigJson=t},expression:"selectedDataSourceConfigJson"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.selectedDataSourceConfigJsonTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent,"empty-text":"无需配置"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件输出说明",name:"tClassInfo"}},[a("el-tree",{attrs:{data:e.selectedDataSourceTclassInfoTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"协议转换器"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择协议转换器"},on:{change:e.protocolDataConverterChange},model:{value:e.selectedProtocolDataConverterName,callback:function(t){e.selectedProtocolDataConverterName=t},expression:"selectedProtocolDataConverterName"}},e._l(e.installProtocolDataConverterList,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[null!=e.selectedDataSource.tclassInfo&&t.tclassInfo.clazzStr==e.selectedDataSource.tclassInfo.clazzStr?a("span",[e._v("\n                          类型完全匹配√\n                        ")]):e._e()])])}),1),e._v(" "),a("el-tabs",{model:{value:e.protocolDataConverterActiveModel,callback:function(t){e.protocolDataConverterActiveModel=t},expression:"protocolDataConverterActiveModel"}},[a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.selectedProtocolDataConverterConfigJson,callback:function(t){e.selectedProtocolDataConverterConfigJson=t},expression:"selectedProtocolDataConverterConfigJson"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.selectedProtocolDataConverterConfigJsonTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent,"empty-text":"无需配置"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件输入说明",name:"tClassInfo"}},[a("el-tree",{attrs:{data:e.selectedProtocolDataConverterTclassInfoTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件输出说明",name:"pClassInfo"}},[a("el-tree",{attrs:{data:e.selectedProtocolDataConverterPclassInfoTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.viewFormActiveIndex,expression:"viewFormActiveIndex == 2"}],staticStyle:{"margin-top":"10px"}},[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.addChecker}},[e._v("添加")])],1),e._v(" "),e._l(e.selectedCheckerNames,function(t,o){return a("el-form-item",{key:o,attrs:{label:"过滤器"+(o+1)}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择过滤器"},on:{change:function(t){return e.checkerChange(t,o)}},model:{value:e.selectedCheckerNames[o],callback:function(t){e.$set(e.selectedCheckerNames,o,t)},expression:"selectedCheckerNames[index]"}},e._l(e.installCheckers,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[null!=e.selectedProtocolDataConverter.pclassInfo&&t.pclassInfo.clazzStr==e.selectedProtocolDataConverter.pclassInfo.clazzStr?a("span",[e._v("\n                          类型完全匹配√\n                        ")]):e._e()])])}),1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.deleteChecker(o)}}}),e._v(" "),a("el-tabs",{model:{value:e.checkersActiveModel[o],callback:function(t){e.$set(e.checkersActiveModel,o,t)},expression:"checkersActiveModel[index]"}},[a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.selectedCheckerConfigJsons[o],callback:function(t){e.$set(e.selectedCheckerConfigJsons,o,t)},expression:"selectedCheckerConfigJsons[index]"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.selectedCheckerConfigJsonTreeDatas[o],props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent,"empty-text":"无需配置"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件输入说明",name:"tClassInfo"}},[a("el-tree",{attrs:{data:e.selectedCheckerPclassInfoTreeDatas[o],props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1)})],2)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3==e.viewFormActiveIndex,expression:"viewFormActiveIndex == 3"}],staticStyle:{"margin-top":"10px"}},[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"输出源"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择输出源"},on:{change:e.dataSinkChange},model:{value:e.selectedDataSinkName,callback:function(t){e.selectedDataSinkName=t},expression:"selectedDataSinkName"}},e._l(e.installDataSinkList,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1),e._v(" "),a("el-tabs",{model:{value:e.dataSinkActiveModel,callback:function(t){e.dataSinkActiveModel=t},expression:"dataSinkActiveModel"}},[a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.selectedDataSinkConfigJson,callback:function(t){e.selectedDataSinkConfigJson=t},expression:"selectedDataSinkConfigJson"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.selectedDataSinkConfigJsonTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent,"empty-text":"无需配置"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件输入说明",name:"pClassInfo"}},[a("el-tree",{attrs:{data:e.selectedDataSinkRclassInfoTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:4==e.viewFormActiveIndex,expression:"viewFormActiveIndex == 4"}],staticStyle:{"margin-top":"10px"}},[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"数据转换器"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择数据转换器"},on:{change:e.dataConverterChange},model:{value:e.selectedDataConverterName,callback:function(t){e.selectedDataConverterName=t},expression:"selectedDataConverterName"}},e._l(e.installDataConverters,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[null!=e.selectedProtocolDataConverter.pclassInfo&&null!=e.selectedDataSink.rclassInfo&&t.pclassInfo.clazzStr==e.selectedProtocolDataConverter.pclassInfo.clazzStr&&t.rclassInfo.clazzStr==e.selectedDataSink.rclassInfo.clazzStr?a("span",[e._v("\n                          类型完全匹配\n                        ")]):e._e()])])}),1),e._v(" "),a("el-tabs",{model:{value:e.dataConverterActiveModel,callback:function(t){e.dataConverterActiveModel=t},expression:"dataConverterActiveModel"}},[a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.selectedDataConverterConfigJson,callback:function(t){e.selectedDataConverterConfigJson=t},expression:"selectedDataConverterConfigJson"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.selectedDataConverterConfigJsonTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent,"empty-text":"无需配置"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件输入说明",name:"pClassInfo"}},[a("el-tree",{attrs:{data:e.selectedDataConverterPclassInfoTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件输出说明",name:"rClassInfo"}},[a("el-tree",{attrs:{data:e.selectedDataConverterRclassInfoTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.viewFormActiveIndex>1,expression:"viewFormActiveIndex > 1"}],staticStyle:{"margin-top":"12px"},on:{click:e.viewFormPre}},[e._v("上一步")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.viewFormActiveIndex<4,expression:"viewFormActiveIndex < 4"}],staticStyle:{"margin-top":"12px"},on:{click:e.viewFormNext}},[e._v("下一步\n              ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:4==e.viewFormActiveIndex,expression:"viewFormActiveIndex == 4"}],staticStyle:{"margin-top":"12px"},attrs:{type:"primary",plain:""},on:{click:e.viewFormConfirm}},[e._v("生成json\n              ")])],1)],1):e._e(),e._v(" "),a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.form.configJson,callback:function(t){e.$set(e.form,"configJson",t)},expression:"form.configJson"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.taskConfigJsonTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1),e._v(" "),a("el-collapse-item",{attrs:{title:"tagConfig",name:"tagConfig"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.taskDetailVisible,title:"任务详情",width:"60%"},on:{"update:visible":function(t){e.taskDetailVisible=t}}},[a("p",[e._v("基本信息：")]),e._v(" "),a("el-table",{attrs:{data:e.taskDetailForm}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"taskId",label:"任务ID"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"taskName",label:"任务名称"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"pluginId",label:"插件ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mydataharborCreatorClazz",label:"创建器"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalNumberOfPipeline",label:"管道数"}}),e._v(" "),a("el-table-column",{attrs:{label:"故障转移"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.enableRebalance?a("el-tag",{attrs:{size:"small"}},[e._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("false")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"负载均衡"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.enableLoadBalance?a("el-tag",{attrs:{size:"small"}},[e._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("false")])]}}])})],1),e._v(" "),a("p",[e._v("监控信息：")]),e._v(" "),a("el-table",{attrs:{data:e.taskMonitorInfos}},[a("el-table-column",{attrs:{formatter:e.dateFormat,prop:"lastRunTime",label:"最近一次处理时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"recordCount",label:"拉取总数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pollErrorCount",label:"拉取异常次数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"protocolConvertSuccessCount",label:"协议转换成功数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"protocolConvertErrorCount",label:"协议转换失败数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkerSuccessCount",label:"校验通过数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkerErrorCount",label:"校验失败数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dataConvertSuccessCount",label:"数据转换成功数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dataConvertErrorCount",label:"数据转换失败数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"writeSuccessCount",label:"写入成功数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"writeErrorCount",label:"写入失败数"}})],1),e._v(" "),a("p",[e._v("任务分配信息：")]),e._v(" "),a("el-table",{attrs:{data:e.taskAssignedInfo}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("管道信息：")]),e._v(" "),e._l(t.row.pipelineStates,function(t,o){return a("p",{key:o},[e._v("\n            "+e._s(o)+"："+e._s(t)+"\n          ")])}),e._v(" "),a("el-divider"),e._v(" "),a("p",[e._v("写总计：")]),e._v(" "),e._l(t.row.writeTotal,function(t,o){return a("p",{key:o},[e._v("\n            "+e._s(o)+"："+e._s(t)+"\n          ")])})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeName",label:"节点",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskNum",label:"任务数",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"createException",label:"创建异常"},scopedSlots:e._u([{key:"default",fn:function(t){return[null==t.row.createException?a("span",[e._v("无")]):a("span",[e._v(e._s(t.row.createException))])]}}])})],1),e._v(" "),a("p",[e._v("任务设置")]),e._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.detailSettingJsonConfig,callback:function(t){e.detailSettingJsonConfig=t},expression:"detailSettingJsonConfig"}}),e._v(" "),a("p",[e._v("任务行为")]),e._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.detailConfigJson,callback:function(t){e.detailConfigJson=t},expression:"detailConfigJson"}}),e._v(" "),a("p",[e._v("tags其它属性")]),e._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.detailTags,callback:function(t){e.detailTags=t},expression:"detailTags"}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogUpdateVisible,title:"任务修改",width:"60%"},on:{"update:visible":function(t){e.dialogUpdateVisible=t}}},[a("el-form",{attrs:{model:e.updateForm,"label-position":"left"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"任务ID","label-width":"70px"}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.updateForm.taskId,callback:function(t){e.$set(e.updateForm,"taskId",t)},expression:"updateForm.taskId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"管道数","label-width":"70px",prop:"pluginId"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.updateForm.totalNumberOfPipeline,callback:function(t){e.$set(e.updateForm,"totalNumberOfPipeline",t)},expression:"updateForm.totalNumberOfPipeline"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"任务名","label-width":"70px",prop:"pluginId"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.updateForm.taskName,callback:function(t){e.$set(e.updateForm,"taskName",t)},expression:"updateForm.taskName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"故障转移","label-width":"70px",prop:"version"}},[a("el-select",{attrs:{placeholder:"请选择是否故障转移"},model:{value:e.updateForm.enableRebalance,callback:function(t){e.$set(e.updateForm,"enableRebalance",t)},expression:"updateForm.enableRebalance"}},[a("el-option",{attrs:{label:"true",value:"true"}}),e._v(" "),a("el-option",{attrs:{label:"false",value:"false"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"负载均衡","label-width":"70px",prop:"version"}},[a("el-select",{attrs:{placeholder:"请选择是否负载均衡"},model:{value:e.updateForm.enableLoadBalance,callback:function(t){e.$set(e.updateForm,"enableLoadBalance",t)},expression:"updateForm.enableLoadBalance"}},[a("el-option",{attrs:{label:"true",value:"true"}}),e._v(" "),a("el-option",{attrs:{label:"false",value:"false"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateFormSubmit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogRecreateUpdateVisible,title:"重建任务（该操作会先销毁当前任务的所有管道实例，然后重新创建，很重的一种操作）",width:"80%"},on:{"update:visible":function(t){e.dialogRecreateUpdateVisible=t},close:e.recreateClose}},[a("el-form",{attrs:{model:e.recreateUpdateForm,"label-position":"left"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"任务ID","label-width":"70px"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off",disabled:""},model:{value:e.recreateUpdateForm.taskId,callback:function(t){e.$set(e.recreateUpdateForm,"taskId",t)},expression:"recreateUpdateForm.taskId"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"组名"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",size:"small",disabled:""},model:{value:e.recreateUpdateForm.groupName,callback:function(t){e.$set(e.recreateUpdateForm,"groupName",t)},expression:"recreateUpdateForm.groupName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"任务名"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入任务名",autocomplete:"off",size:"small"},model:{value:e.recreateUpdateForm.taskName,callback:function(t){e.$set(e.recreateUpdateForm,"taskName",t)},expression:"recreateUpdateForm.taskName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"管道数"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",size:"small"},model:{value:e.recreateUpdateForm.totalNumberOfPipeline,callback:function(t){e.$set(e.recreateUpdateForm,"totalNumberOfPipeline",t)},expression:"recreateUpdateForm.totalNumberOfPipeline"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"插件ID",prop:"pluginId"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择组件ID",size:"small"},on:{change:e.selectPluginId},model:{value:e.recreateUpdateForm.pluginId,callback:function(t){e.$set(e.recreateUpdateForm,"pluginId",t)},expression:"recreateUpdateForm.pluginId"}},e._l(e.pluginInstallList,function(e){return a("el-option",{key:e.id,attrs:{label:e.pluginId,value:e.pluginId}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"创建器"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择CreatorClazz",size:"small"},on:{change:e.creatorClazzChange},model:{value:e.recreateUpdateForm.mydataharborCreatorClazz,callback:function(t){e.$set(e.recreateUpdateForm,"mydataharborCreatorClazz",t)},expression:"recreateUpdateForm.mydataharborCreatorClazz"}},e._l(e.clazzList,function(e){return a("el-option",{key:e.id,attrs:{label:e.type+e.clazz,value:e.clazz}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"故障转移"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择是否设置故障转移",size:"small"},model:{value:e.recreateUpdateForm.enableRebalance,callback:function(t){e.$set(e.recreateUpdateForm,"enableRebalance",t)},expression:"recreateUpdateForm.enableRebalance"}},[a("el-option",{attrs:{label:"true",value:"true"}}),e._v(" "),a("el-option",{attrs:{label:"false",value:"false"}})],1)],1),e._v(" "),a("el-alert",{staticStyle:{"margin-top":"-20px"},attrs:{title:"值为false，节点停机，任务将不会自动转移！但是会有告警信息发出，适合不能重复运行的任务",type:"info","show-icon":""}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"负载均衡"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择是否设置负载均衡",size:"small"},model:{value:e.recreateUpdateForm.enableLoadBalance,callback:function(t){e.$set(e.recreateUpdateForm,"enableLoadBalance",t)},expression:"recreateUpdateForm.enableLoadBalance"}},[a("el-option",{attrs:{label:"true",value:"true"}}),e._v(" "),a("el-option",{attrs:{label:"false",value:"false"}})],1)],1),e._v(" "),a("el-alert",{staticStyle:{"margin-top":"-20px"},attrs:{title:"当集群内有节点加入时，开启负载均衡的任务有可能会被重新分配到其他节点（任务会被有中断的过程），以便分散压力，如果不希望任务随意被停止转移请设置为false",type:"info","show-icon":""}})],1)],1),e._v(" "),a("el-collapse",{model:{value:e.collapseActiveNames,callback:function(t){e.collapseActiveNames=t},expression:"collapseActiveNames"}},[a("el-collapse-item",{attrs:{title:"settingContextConfig",name:"settingConfig"}},[a("el-tabs",{model:{value:e.defaultActiveModel,callback:function(t){e.defaultActiveModel=t},expression:"defaultActiveModel"}},[a("el-tab-pane",{attrs:{label:"json配置",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.recreateUpdateForm.settingJsonConfig,callback:function(t){e.$set(e.recreateUpdateForm,"settingJsonConfig",t)},expression:"recreateUpdateForm.settingJsonConfig"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.settingConfigJsonTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1),e._v(" "),a("el-collapse-item",{attrs:{title:"taskConfig",name:"taskConfig"}},[a("el-tabs",{model:{value:e.taskConfigDefaultActiveModel,callback:function(t){e.taskConfigDefaultActiveModel=t},expression:"taskConfigDefaultActiveModel"}},["mydataharbor.system.plugin.creator.CommonPipelineCreator"==e.recreateUpdateForm.mydataharborCreatorClazz?a("el-tab-pane",{attrs:{label:"pipeline可视化配置",name:"viewForm"}},[a("el-steps",{attrs:{active:e.viewFormActiveIndex}},[a("el-step",{attrs:{title:"配置输入源",description:"选择并配置数据源和相应的协议转换器"}}),e._v(" "),a("el-step",{attrs:{title:"配置检查器",description:"可以配置多个检查器将不符合要求的协议数据过滤掉"}}),e._v(" "),a("el-step",{attrs:{title:"配置输出源",description:"选择要写入的目标数据源并配置参数"}}),e._v(" "),a("el-step",{attrs:{title:"配置数据转换器",description:"选择合适的数据转换器，这个步骤大部分是需要自己写代码的地方，当然也可以选择通用的数据转换器比如GroovyDataConverter"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.viewFormActiveIndex,expression:"viewFormActiveIndex == 1"}],staticStyle:{"margin-top":"10px"}},[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"选择输入源"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择数据源"},on:{change:e.dataSourceChange},model:{value:e.selectedDataSourceName,callback:function(t){e.selectedDataSourceName=t},expression:"selectedDataSourceName"}},e._l(e.installDataSourceList,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1),e._v(" "),a("el-tabs",{model:{value:e.dataSourceActiveModel,callback:function(t){e.dataSourceActiveModel=t},expression:"dataSourceActiveModel"}},[a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.selectedDataSourceConfigJson,callback:function(t){e.selectedDataSourceConfigJson=t},expression:"selectedDataSourceConfigJson"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.selectedDataSourceConfigJsonTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent,"empty-text":"无需配置"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件输出说明",name:"tClassInfo"}},[a("el-tree",{attrs:{data:e.selectedDataSourceTclassInfoTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"协议转换器"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择协议转换器"},on:{change:e.protocolDataConverterChange},model:{value:e.selectedProtocolDataConverterName,callback:function(t){e.selectedProtocolDataConverterName=t},expression:"selectedProtocolDataConverterName"}},e._l(e.installProtocolDataConverterList,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[null!=e.selectedDataSource.tclassInfo&&t.tclassInfo.clazzStr==e.selectedDataSource.tclassInfo.clazzStr?a("span",[e._v("\n                            类型完全匹配√\n                          ")]):e._e()])])}),1),e._v(" "),a("el-tabs",{model:{value:e.protocolDataConverterActiveModel,callback:function(t){e.protocolDataConverterActiveModel=t},expression:"protocolDataConverterActiveModel"}},[a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.selectedProtocolDataConverterConfigJson,callback:function(t){e.selectedProtocolDataConverterConfigJson=t},expression:"selectedProtocolDataConverterConfigJson"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.selectedProtocolDataConverterConfigJsonTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent,"empty-text":"无需配置"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件输入说明",name:"tClassInfo"}},[a("el-tree",{attrs:{data:e.selectedProtocolDataConverterTclassInfoTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件输出说明",name:"pClassInfo"}},[a("el-tree",{attrs:{data:e.selectedProtocolDataConverterPclassInfoTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.viewFormActiveIndex,expression:"viewFormActiveIndex == 2"}],staticStyle:{"margin-top":"10px"}},[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.addChecker}},[e._v("添加")])],1),e._v(" "),e._l(e.selectedCheckerNames,function(t,o){return a("el-form-item",{key:o,attrs:{label:"过滤器"+(o+1)}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择过滤器"},on:{change:function(t){return e.checkerChange(t,o)}},model:{value:e.selectedCheckerNames[o],callback:function(t){e.$set(e.selectedCheckerNames,o,t)},expression:"selectedCheckerNames[index]"}},e._l(e.installCheckers,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[null!=e.selectedProtocolDataConverter.pclassInfo&&t.pclassInfo.clazzStr==e.selectedProtocolDataConverter.pclassInfo.clazzStr?a("span",[e._v("\n                            类型完全匹配√\n                          ")]):e._e()])])}),1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.deleteChecker(o)}}}),e._v(" "),a("el-tabs",{model:{value:e.checkersActiveModel[o],callback:function(t){e.$set(e.checkersActiveModel,o,t)},expression:"checkersActiveModel[index]"}},[a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.selectedCheckerConfigJsons[o],callback:function(t){e.$set(e.selectedCheckerConfigJsons,o,t)},expression:"selectedCheckerConfigJsons[index]"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.selectedCheckerConfigJsonTreeDatas[o],props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent,"empty-text":"无需配置"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件输入说明",name:"tClassInfo"}},[a("el-tree",{attrs:{data:e.selectedCheckerPclassInfoTreeDatas[o],props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1)})],2)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3==e.viewFormActiveIndex,expression:"viewFormActiveIndex == 3"}],staticStyle:{"margin-top":"10px"}},[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"输出源"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择输出源"},on:{change:e.dataSinkChange},model:{value:e.selectedDataSinkName,callback:function(t){e.selectedDataSinkName=t},expression:"selectedDataSinkName"}},e._l(e.installDataSinkList,function(e){return a("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}),1),e._v(" "),a("el-tabs",{model:{value:e.dataSinkActiveModel,callback:function(t){e.dataSinkActiveModel=t},expression:"dataSinkActiveModel"}},[a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.selectedDataSinkConfigJson,callback:function(t){e.selectedDataSinkConfigJson=t},expression:"selectedDataSinkConfigJson"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.selectedDataSinkConfigJsonTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent,"empty-text":"无需配置"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件输入说明",name:"pClassInfo"}},[a("el-tree",{attrs:{data:e.selectedDataSinkRclassInfoTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:4==e.viewFormActiveIndex,expression:"viewFormActiveIndex == 4"}],staticStyle:{"margin-top":"10px"}},[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"数据转换器"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择数据转换器"},on:{change:e.dataConverterChange},model:{value:e.selectedDataConverterName,callback:function(t){e.selectedDataConverterName=t},expression:"selectedDataConverterName"}},e._l(e.installDataConverters,function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.name}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[null!=e.selectedProtocolDataConverter.pclassInfo&&null!=e.selectedDataSink.rclassInfo&&t.pclassInfo.clazzStr==e.selectedProtocolDataConverter.pclassInfo.clazzStr&&t.rclassInfo.clazzStr==e.selectedDataSink.rclassInfo.clazzStr?a("span",[e._v("\n                            类型完全匹配\n                          ")]):e._e()])])}),1),e._v(" "),a("el-tabs",{model:{value:e.dataConverterActiveModel,callback:function(t){e.dataConverterActiveModel=t},expression:"dataConverterActiveModel"}},[a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.selectedDataConverterConfigJson,callback:function(t){e.selectedDataConverterConfigJson=t},expression:"selectedDataConverterConfigJson"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.selectedDataConverterConfigJsonTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent,"empty-text":"无需配置"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件输入说明",name:"pClassInfo"}},[a("el-tree",{attrs:{data:e.selectedDataConverterPclassInfoTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"组件输出说明",name:"rClassInfo"}},[a("el-tree",{attrs:{data:e.selectedDataConverterRclassInfoTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.viewFormActiveIndex>1,expression:"viewFormActiveIndex > 1"}],staticStyle:{"margin-top":"12px"},on:{click:e.viewFormPre}},[e._v("上一步")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.viewFormActiveIndex<4,expression:"viewFormActiveIndex < 4"}],staticStyle:{"margin-top":"12px"},on:{click:e.viewFormNext}},[e._v("下一步\n                ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:4==e.viewFormActiveIndex,expression:"viewFormActiveIndex == 4"}],staticStyle:{"margin-top":"12px"},attrs:{type:"primary",plain:""},on:{click:e.viewFormConfirm}},[e._v("生成json\n                ")])],1)],1):e._e(),e._v(" "),a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.recreateUpdateForm.configJson,callback:function(t){e.$set(e.recreateUpdateForm,"configJson",t)},expression:"recreateUpdateForm.configJson"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.taskConfigJsonTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1),e._v(" "),a("el-collapse-item",{attrs:{title:"tagConfig",name:"tagConfig"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.recreateUpdateForm.tags,callback:function(t){e.$set(e.recreateUpdateForm,"tags",t)},expression:"recreateUpdateForm.tags"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.recreateUpdateFormSubmit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogStateVisible,title:"任务状态",width:"23%"},on:{"update:visible":function(t){e.dialogStateVisible=t}}},[a("el-form",{attrs:{model:e.stateForm,"label-position":"left"}},[a("el-form-item",{attrs:{label:"任务ID","label-width":"70px"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off",disabled:""},model:{value:e.stateForm.taskId,callback:function(t){e.$set(e.stateForm,"taskId",t)},expression:"stateForm.taskId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务状态","label-width":"70px",prop:"version"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择任务状态"},model:{value:e.stateForm.taskState,callback:function(t){e.$set(e.stateForm,"taskState",t)},expression:"stateForm.taskState"}},e._l(e.states,function(e,t){return a("el-option",{key:e,attrs:{label:e,value:t}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateStateFormSubmit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var Q=a("VU/8")(G,Y,!1,function(e){a("XihV")},"data-v-361a1550",null).exports,X=a("8U58"),W=a.n(X),K=(a("4/hK"),a("hD67"),a("tPrY"),a("9ozf"),a("lYxz"),window.CodeMirror||W.a),Z={name:"Script",props:{groupName:String,value:String,language:{type:String,default:null}},data:function(){return{code:"def cal(int a, int b){\n  return a+b\n}\n",mode:"groovy",coder:null,options:{tabSize:8,theme:"abcdef",lineNumbers:!0,line:!0}}},mounted:function(){this._initialize()},methods:{_initialize:function(){var e=this;if(this.coder=K.fromTextArea(this.$refs.textarea,this.options),this.coder.setValue(this.value||this.code),this.coder.on("change",function(t){e.code=t.getValue(),e.$emit&&e.$emit("input",e.code)}),this.language){var t=this._getLanguage(this.language);t&&(this.mode=t.label)}},changeMode:function(){}}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"in-coder-panel"},[a("div",{staticStyle:{margin:"20px 0 20px 0"}},[a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:6}},[a("div",[e._v("\n          输入源："),a("el-select",{staticClass:"code-mode-select",attrs:{size:"small",value:""},on:{change:e.changeMode}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",[e._v("\n          输出源："),a("el-select",{staticClass:"code-mode-select",attrs:{size:"small",value:""},on:{change:e.changeMode}})],1)])],1)],1),e._v(" "),a("div",[a("textarea",{ref:"textarea"})]),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("提交执行")])],1)])},staticRenderFns:[]};var te={inject:["reload"],name:"operation",props:["groupName"],data:function(){return{}},methods:{deleteGroup:function(){var e=this;this.$confirm("此操作将永久删除【"+this.groupName+"】集群, 是否继续?","确认提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.getRequest("/mydataharbor/node/deleteGroup?groupName="+e.groupName).then(function(t){console.log(t),0==t.code?(e.$message({type:"success",message:"删除成功!"}),e.reload()):e.$message({type:"error",message:"删除失败，"+t.msg})})}).catch(function(){e.$message({type:"info",message:"已取消删除!"})})}}},ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tag",[e._v("当前分组： "+e._s(e.groupName))]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger",size:"small"},on:{click:function(t){return e.deleteGroup()}}},[e._v("删除该分组")])],1)},staticRenderFns:[]};var oe={name:"Cluster",components:{Tasks:Q,Plugins:I,Node:y,Script:a("VU/8")(Z,ee,!1,function(e){a("hP/U")},null,null).exports,Operation:a("VU/8")(te,ae,!1,function(e){a("Xrj0")},"data-v-d85d2bca",null).exports},data:function(){return{cluster:{},selectGroup:"",selectOption:"节点"}},mounted:function(){this.initData()},methods:{initData:function(){var e=this;this.getRequest("mydataharbor/node/groupList").then(function(t){if(0==t.code){e.cluster=t.data;var a=e.$router.history.current.query,o=JSON.parse(h()(a));null!=o.selectOption&&(e.selectOption=o.selectOption),e.selectGroup=o.selectGroup;var n="",r=0,l=!1;for(var s in e.cluster)0==r&&(n=s),r++,null!=e.selectGroup&&e.selectGroup==s&&(l=!0);l||(e.selectGroup=n)}})},groupChange:function(e,t){var a=this.$router.history.current.query,o=this.$router.history.current.path,n=JSON.parse(h()(a));n.selectGroup=e.name,this.$router.push({path:o,query:n})},optionChange:function(e,t){var a=this.$router.history.current.query,o=this.$router.history.current.path,n=JSON.parse(h()(a));n.selectOption=e.name,this.$router.push({path:o,query:n})}}},ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container mixin-components-container"},[a("el-card",{staticClass:"box-card",staticStyle:{padding:"5px"}},[a("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":e.groupChange},model:{value:e.selectGroup,callback:function(t){e.selectGroup=t},expression:"selectGroup"}},e._l(e.cluster,function(t){return a("el-tab-pane",{key:t.id,attrs:{label:t.groupName,name:t.groupName,lazy:!0}},[a("el-tabs",{staticStyle:{"margin-left":"10px"},attrs:{"active-name":"first"},on:{"tab-click":e.optionChange},model:{value:e.selectOption,callback:function(t){e.selectOption=t},expression:"selectOption"}},[a("el-tab-pane",{attrs:{label:"节点",name:"节点",lazy:!0}},[a("Node",{attrs:{"node-list":t.nodeInfos}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"插件",name:"插件",lazy:!0}},[a("Plugins",{attrs:{"group-name":t.groupName}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"任务",name:"任务",lazy:!0}},[a("Tasks",{attrs:{"group-name":t.groupName}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"操作",name:"操作",lazy:!0}},[a("Operation",{attrs:{"group-name":t.groupName}})],1)],1)],1)}),1)],1)],1)},staticRenderFns:[]};var re=a("VU/8")(oe,ne,!1,function(e){a("E22g")},"data-v-d178bca4",null).exports,le={name:"Plugin",data:function(){return{query:{pageNo:1,pageSize:10,pluginId:"",version:"",des:""},tableData:[],cloudData:[],pageTotal:0,showFile:!0,pluginTabActive:"localPlugin",repoForm:{repoName:"",config:{email:"",token:""}}}},mounted:function(){this.initData()},methods:{initData:function(){var e=this;console.log("loading info……"),this.getRequest("mydataharbor/plugin/listPlugins",this.query).then(function(t){e.tableData=t.data["本地存储库"],e.cloudData=t.data["MyDataHarbor官方插件存储库"],console.log(t)}),this.getRequest("mydataharbor/plugin/queryPluginRepoConfig",this.query).then(function(t){e.repoForm.config=t.data["MyDataHarbor-Reporsitory"].config,console.log(t)})},downloadToLocal:function(e){var t=this;this.$message.warning("下载插件需要不少时间，请耐心等待！"),this.setLoadingMsg("服务器带宽有限，努力下载中..."),this.getRequest(e).then(function(e){0==e.code?(t.$message.info("下载成功！"),t.initData()):t.$message.warning(e.msg)})},configPluginRepo:function(){var e=this;this.repoForm.repoName="MyDataHarbor-Reporsitory",this.postRequest("mydataharbor/plugin/configPluginRepo",this.repoForm).then(function(t){0==t.code?(e.$message.info("Token修改成功！"),e.initData()):e.$message.warning(t.msg)})},clear:function(){this.initData()},handleSuccess:function(e,t){console.log("success"),-1==e.code&&(this.$message.error(e.msg),this.showFile=!1)},handleError:function(e,t,a){console.log("error"+e),console.log(t),console.log(a)}}},se={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container mixin-components-container"},[a("el-card",{staticClass:"box-card",staticStyle:{padding:"5px"}},[a("el-tabs",{attrs:{type:"card"},model:{value:e.pluginTabActive,callback:function(t){e.pluginTabActive=t},expression:"pluginTabActive"}},[a("el-tab-pane",{attrs:{label:"本地插件",name:"localPlugin"}},[a("div",{staticClass:"handle-box"},[a("div",[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/mydataharbor/plugin/uploadPlugin","on-success":e.handleSuccess,"on-error":e.handleError,"show-file-list":e.showFile}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传插件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jar文件，且不超过500M")])],1)],1)]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},e._l(e.tableData,function(t,o){return o%2==0?a("el-col",{key:o,attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{height:"50px"},attrs:{slot:"header"},slot:"header"},[null!=t.imageBase64?a("img",{staticStyle:{height:"50px"},attrs:{src:t.imageBase64}}):e._e(),e._v("\n                  "+e._s(t.groupName)+"\n                ")]),e._v(" "),a("el-collapse",{attrs:{value:t.plugins[0].pluginId}},e._l(t.plugins,function(t,o){return a("el-collapse-item",{key:o,attrs:{title:t.pluginId,name:t.pluginId}},[a("el-table",{directives:[{name:"fit-columns",rawName:"v-fit-columns"}],ref:"multipleTable",refInFor:!0,staticClass:"table",attrs:{fit:!0,data:t.repoPlugins,border:"","row-key":"pluginId","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"pluginId",label:"插件id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"依赖"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.dependencies,function(t){return a("p",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v("【插件id:"+e._s(t.pluginId)+",版本:"+e._s(t.pluginVersionSupport)+",可选："+e._s(t.optional)+"】")])})}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","show-overflow-tooltip":"",prop:"pluginDescription",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{href:"/mydataharbor/plugin/downloadPlugin?pluginId="+t.row.pluginId+"&version="+t.row.version,type:"primary",icon:"el-icon-download",target:"_blank"}},[e._v("下载\n                          ")])]}}],null,!0)})],1)],1)}),1)],1)],1):e._e()}),1),e._v(" "),a("el-col",{attrs:{span:12}},e._l(e.tableData,function(t,o){return o%2==1?a("el-col",{key:o,attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{height:"50px"},attrs:{slot:"header"},slot:"header"},[null!=t.imageBase64?a("img",{staticStyle:{height:"50px"},attrs:{src:t.imageBase64}}):e._e(),e._v("\n                  "+e._s(t.groupName)+"\n                ")]),e._v(" "),a("el-collapse",{attrs:{value:t.plugins[0].pluginId}},e._l(t.plugins,function(t,o){return a("el-collapse-item",{key:o,attrs:{title:t.pluginId,name:t.pluginId}},[a("el-table",{directives:[{name:"fit-columns",rawName:"v-fit-columns"}],ref:"multipleTable",refInFor:!0,staticClass:"table",attrs:{fit:!0,data:t.repoPlugins,border:"","row-key":"pluginId","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"pluginId",label:"插件id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"依赖"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.dependencies,function(t,o){return a("p",{key:o,staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v("【插件id:"+e._s(t.pluginId)+",版本:"+e._s(t.pluginVersionSupport)+",可选："+e._s(t.optional)+"】")])})}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"pluginDescription",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{href:"/mydataharbor/plugin/downloadPlugin?pluginId="+t.row.pluginId+"&version="+t.row.version,type:"primary",icon:"el-icon-download",target:"_blank"}},[e._v("下载\n                          ")])]}}],null,!0)})],1)],1)}),1)],1)],1):e._e()}),1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"插件市场",name:"cloudPlugin"}},[a("div",{staticClass:"handle-box"},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.repoForm}},[a("el-form-item",{attrs:{label:"email"}},[a("el-input",{attrs:{placeholder:"email"},model:{value:e.repoForm.config.email,callback:function(t){e.$set(e.repoForm.config,"email",t)},expression:"repoForm.config.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"token"}},[a("el-input",{attrs:{placeholder:"token",type:"password"},model:{value:e.repoForm.config.token,callback:function(t){e.$set(e.repoForm.config,"token",t)},expression:"repoForm.config.token"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.configPluginRepo}},[e._v("修改")])],1),e._v(" "),a("el-form-item",[a("a",{attrs:{target:"_blank",href:"https://www.mydataharbor.com/user/info.html"}},[e._v("获取账户Token")])])],1)],1)]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},e._l(e.cloudData,function(t,o){return o%2==0?a("el-col",{key:o,attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{height:"50px"},attrs:{slot:"header"},slot:"header"},[null!=t.imageBase64?a("img",{staticStyle:{height:"50px"},attrs:{src:t.imageBase64}}):e._e(),e._v("\n                  "+e._s(t.groupName)+"\n                ")]),e._v(" "),a("el-collapse",{attrs:{value:t.plugins[0].pluginId}},e._l(t.plugins,function(t,o){return a("el-collapse-item",{key:o,attrs:{title:t.pluginId,name:t.pluginId}},[a("el-table",{directives:[{name:"fit-columns",rawName:"v-fit-columns"}],ref:"multipleTable",refInFor:!0,staticClass:"table",attrs:{data:t.repoPlugins,border:"","row-key":"pluginId","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"pluginId",label:"插件id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本"}}),e._v(" "),a("el-table-column",{attrs:{label:"授权"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.authed?a("el-tag",{attrs:{size:"small"}},[e._v("已授权")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("未授权")])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"依赖"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.dependencies,function(t,o){return a("p",{key:o},[e._v("【插件id:"+e._s(t.pluginId)+",版本:"+e._s(t.pluginVersionSupport)+",可选："+e._s(t.optional)+"】")])})}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"pluginDescription",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(a){return e.downloadToLocal("/mydataharbor/plugin/downloadToLocal?pluginId="+t.row.pluginId+"&version="+t.row.version+"&repoType=MyDataHarbor-Reporsitory")}}},[e._v("\n                            下载到本地\n                          ")])]}}],null,!0)})],1)],1)}),1)],1)],1):e._e()}),1),e._v(" "),a("el-col",{attrs:{span:12}},e._l(e.cloudData,function(t,o){return o%2==1?a("el-col",{key:o,attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{height:"50px"},attrs:{slot:"header"},slot:"header"},[null!=t.imageBase64?a("img",{staticStyle:{height:"50px"},attrs:{src:t.imageBase64}}):e._e(),e._v("\n                  "+e._s(t.groupName)+"\n                ")]),e._v(" "),a("el-collapse",{attrs:{value:t.plugins[0].pluginId}},e._l(t.plugins,function(t,o){return a("el-collapse-item",{key:o,attrs:{title:t.pluginId,name:t.pluginId}},[a("el-table",{directives:[{name:"fit-columns",rawName:"v-fit-columns"}],ref:"multipleTable",refInFor:!0,staticClass:"table",attrs:{data:t.repoPlugins,border:"","row-key":"pluginId","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"pluginId",label:"插件id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本"}}),e._v(" "),a("el-table-column",{attrs:{label:"授权"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.authed?a("el-tag",{attrs:{size:"small"}},[e._v("已授权")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("未授权")])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"依赖"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.dependencies,function(t,o){return a("p",{key:o},[e._v("【插件id:"+e._s(t.pluginId)+",版本:"+e._s(t.pluginVersionSupport)+",可选："+e._s(t.optional)+"】")])})}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"pluginDescription",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(a){return e.downloadToLocal("/mydataharbor/plugin/downloadToLocal?pluginId="+t.row.pluginId+"&version="+t.row.version+"&repoType=MyDataHarbor-Reporsitory")}}},[e._v("\n                            下载到本地\n                          ")])]}}],null,!0)})],1)],1)}),1)],1)],1):e._e()}),1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var ie=a("VU/8")(le,se,!1,function(e){a("Fltz")},"data-v-1488bfc6",null).exports,ce=a("mtWM"),de=a.n(ce),ue=a("zL8q"),pe=a.n(ue);l.default.use(ue.Loading);var fe=void 0,ge="拼命加载中...";de.a.interceptors.request.use(function(e){return fe=ue.Loading.service({lock:!0,text:ge,background:"rgba(255,255,255,0)"}),e},function(e){return N.a.reject(e)}),de.a.interceptors.response.use(function(e){if(fe.close(),ge="拼命加载中...",!e.status||200!=e.status||500!=e.data.status)return e.data;ue.Message.error({message:e.data.msg})},function(e){504==e.response.status||404==e.response.status?ue.Message.error({message:"服务端宕机了！"}):403==e.response.status?ue.Message.error({message:"权限不足，请联系管理员！"}):401==e.response.status?(ue.Message.error({message:"尚未登录，请登录！"}),me.replace("/")):e.response.data.msg?ue.Message.error({message:e.response.data.msg}):ue.Message.error({message:"未知错误！"})});l.default.prototype.postRequest=function(e,t){return de()({method:"post",url:""+e,data:t})},l.default.prototype.getRequest=function(e,t){return de()({method:"get",url:""+e,params:t})},l.default.prototype.postKeyValueRequest=function(e,t){return de()({method:"post",url:""+e,data:t,transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return console.log(t),t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},l.default.prototype.putRequest=function(e,t){return de()({method:"put",url:""+e,data:t})},l.default.prototype.deleteRequest=function(e,t){return de()({method:"delete",url:""+e,params:t})},l.default.prototype.setLoadingMsg=function(e){ge=e},l.default.use(c.a),l.default.config.productionTip=!1;var me=new c.a({routes:[{path:"/",name:"首页",component:g,hidden:!0},{path:"/home",name:"home",component:g,hidden:!0,children:[{path:"/cluster",name:"集群管理",component:re,hidden:!0},{path:"/plugin",name:"插件管理",component:ie,hidden:!0}]}]});a("tvR6");function he(e,t){return 1===e?e+t:e+t+"s"}function ve(e){var t=Date.now()/1e3-Number(e);return t<3600?he(~~(t/60)," minute"):t<86400?he(~~(t/3600)," hour"):he(~~(t/86400)," day")}function be(e,t){for(var a=[{value:1e18,symbol:"E"},{value:1e15,symbol:"P"},{value:1e12,symbol:"T"},{value:1e9,symbol:"G"},{value:1e6,symbol:"M"},{value:1e3,symbol:"k"}],o=0;o<a.length;o++)if(e>=a[o].value)return(e/a[o].value+.1).toFixed(t).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+a[o].symbol;return e.toString()}function Ce(e){return(+e||0).toString().replace(/^-?\d+/g,function(e){return e.replace(/(?=(?!\b)(\d{3})+$)/g,",")})}function ye(e,t){e=new Date(e),void 0===t&&(t="yyyy-MM-dd HH:mm:ss"),/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var o in a)if(new RegExp("("+o+")").test(t)){var n=a[o]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?n:("00"+n).substr(n.length))}return t}l.default.config.productionTip=!1,l.default.use(pe.a),r()(o).forEach(function(e){l.default.filter(e,o[e])}),new l.default({el:"#app",router:me,components:{App:i},template:"<App/>"})},ONMz:function(e,t,a){e.exports=a.p+"static/img/mydataharbor.fca5557.png"},RHIA:function(e,t){},WMoJ:function(e,t){},XihV:function(e,t){},Xrj0:function(e,t){},hD67:function(e,t){},"hP/U":function(e,t){},hV9u:function(e,t){},oipt:function(e,t){},tPrY:function(e,t){},tvR6:function(e,t){},uGPS:function(e,t){}},["NHnr"]);