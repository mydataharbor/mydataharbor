webpackJsonp([1],{"/Wyd":function(e,t){},"3CLO":function(e,t){},"3qvG":function(e,t){},"4/hK":function(e,t){},"8iAR":function(e,t){},"9ozf":function(e,t){},BhM5:function(e,t){},E22g:function(e,t){},Fltz:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("7+uW"),l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[this.isRouterAlice?t("router-view"):this._e()],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App",provide:function(){return{reload:this.reload}},data:function(){return{isRouterAlice:!0}},methods:{reload:function(){this.isRouterAlice=!1,this.$nextTick(function(){this.isRouterAlice=!0})}}},l,!1,function(e){a("8iAR")},null,null).exports,s=a("/ocq"),r={name:"Dashboard",data:function(){return{imgSrc:a("ONMz")}}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",[t("img",{attrs:{src:this.imgSrc,width:"100%",height:"100%",alt:""}})])])},staticRenderFns:[]};var u={name:"Home",components:{DashBoard:a("VU/8")(r,i,!1,function(e){a("/Wyd")},"data-v-32f785f0",null).exports},data:function(){return{activeIndex:"/"==this.$router.currentRoute.path?"/home":this.$router.currentRoute.path,consoleVersion:""}},mounted:function(){var e=this;this.getRequest("/mydataharbor/dashboard/version").then(function(t){e.consoleVersion=t["console-version"]})},computed:{},methods:{}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{padding:"0 5%"}},[a("el-header",[a("el-menu",{attrs:{mode:"horizontal",router:"","unique-opened":"","default-active":e.activeIndex}},[a("el-menu-item",{attrs:{index:"/home"}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("首页")])]),e._v(" "),a("el-menu-item",{attrs:{index:"/cluster"}},[a("i",{staticClass:"el-icon-s-help"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("集群管理")])]),e._v(" "),a("el-menu-item",{attrs:{index:"/plugin"}},[a("i",{staticClass:"el-icon-s-data"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("插件仓库")])])],1)],1),e._v(" "),a("el-container",{staticStyle:{height:"100%"}},[a("el-main",["/home"==this.$router.currentRoute.path||"/"==this.$router.currentRoute.path?a("DashBoard"):e._e(),e._v(" "),a("router-view",{staticClass:"homeRouterView"})],1)],1),e._v(" "),a("el-footer",[a("el-link",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"},attrs:{href:"https://www.mydataharbor.com"}},[e._v("   官方网站   ")]),e._v(" "),a("el-link",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"},attrs:{href:"/swagger-ui/#/"}},[e._v("   swagger api文档   ")]),e._v(" "),a("p",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v("    MyDataHarbor控制台版本："+e._s(e.consoleVersion)+"    ")])],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,c,!1,function(e){a("BhM5")},"data-v-270e3ec8",null).exports,d=a("mvHQ"),m=a.n(d),f={name:"Node",props:["nodeList"],data:function(){return{nodes:this.nodeList,pageNo:1,pageSize:10,pageTotal:0}},mounted:function(){this.init()},methods:{init:function(){},handlePageChange:function(){},formatDuring:function(e){e=(new Date).getTime()-e;var t=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),o=Math.floor(e%36e5/6e4);return t>0?t+"天"+a+"小时"+o+"分钟":a+"小时"+o+"分钟"}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.nodes,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"nodeName",label:"节点名",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"IP"}}),e._v(" "),a("el-table-column",{attrs:{prop:"port",label:"端口"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hostName",label:"hostName"}}),e._v(" "),a("el-table-column",{attrs:{label:"运行时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.formatDuring(t.row.startTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"taskNum",label:"任务数"}}),e._v(" "),a("el-table-column",{attrs:{label:"leader"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.leader?a("el-tag",{attrs:{type:"success"}},[e._v("true")]):a("el-tag",[e._v("false")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"javaVersion",label:"javaVersion"}}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"version"}}),e._v(" "),a("el-table-column",{attrs:{prop:"osName",label:"osName"}}),e._v(" "),a("el-table-column",{attrs:{prop:"osArch",label:"osArch"}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"sizes, total, prev, pager, next","current-page":e.pageNo,"page-sizes":[5,10,20,50],"page-size":e.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1)},staticRenderFns:[]};var h=a("VU/8")(f,g,!1,function(e){a("3qvG")},"data-v-b8237c42",null).exports,v={name:"Plugins",props:["groupName"],data:function(){return{plugins:[],pageNo:1,pageSize:10,pageTotal:0,dialogFormVisible:!1,form:{groupName:this.groupName,pluginId:"",version:"",sync:!1},pluginInstallList:[],pluginInfoMap:{},rules:{pluginId:[{required:!0,message:"插件ID不能为空",trigger:"blur"}],version:[{required:!0,message:"版本不能为空",trigger:"blur"}]},allPlugins:[],allVersion:[]}},watch:{"form.pluginId":function(e){var t=this;this.form.version="",this.allPlugins.forEach(function(a){a.plugins.forEach(function(a){a.pluginId==e&&(t.allVersion=a.repoPlugins)})})}},mounted:function(){this.initData(),this.initPlugins()},methods:{clearData:function(){this.form={groupName:this.groupName,pluginId:"",version:"",sync:!1}},initData:function(){var e=this;this.getRequest("mydataharbor/plugin/listPlugins").then(function(t){e.allPlugins=t.data["本地存储库"],console.log(e.allPlugins)})},initPlugins:function(){var e=this;this.getRequest("mydataharbor/node/groupList").then(function(t){e.plugins=t.data[e.groupName].installedPlugins,console.log(e.plugins)})},unInstallPlugin:function(e){var t=this;console.log("uninstall"+e),this.postRequest("/mydataharbor/node/uninstallPlugin?groupName="+this.groupName+"&pluginId="+e).then(function(e){0==e.code&&(t.$message.info("插件卸载成功！"),t.initPlugins())})},submit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;var a="mydataharbor/node/installPlugin?groupName="+e.form.groupName+"&pluginId="+e.form.pluginId+"&version="+e.form.version+"&sync="+e.form.sync;e.postRequest(a).then(function(t){0==t.code?(e.$message.info("插件安装成功！"),e.initPlugins()):e.$message.error(t.msg)}),e.dialogFormVisible=!1,e.clearData()})},cancel:function(){this.dialogFormVisible=!1,this.clearData()},handlePageChange:function(){}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("安装插件")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.plugins,border:"","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"pluginId",label:"插件ID",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"pluginDescription",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本"}}),e._v(" "),a("el-table-column",{attrs:{label:"依赖"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.dependencies,function(t){return a("p",[e._v("【插件id:"+e._s(t.pluginId)+",版本:"+e._s(t.pluginVersionSupport)+",可选："+e._s(t.optional)+"】")])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"provider",label:"提供者"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary",icon:"el-icon-close"},on:{click:function(a){return e.unInstallPlugin(t.row.pluginId)}}},[e._v("卸载")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"插件安装",visible:e.dialogFormVisible,width:"25%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"left"}},[a("el-form-item",{attrs:{label:"组名",hidden:""}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.form.groupName,callback:function(t){e.$set(e.form,"groupName",t)},expression:"form.groupName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"插件ID",prop:"pluginId"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择插件id"},model:{value:e.form.pluginId,callback:function(t){e.$set(e.form,"pluginId",t)},expression:"form.pluginId"}},e._l(e.allPlugins,function(t){return a("el-option-group",{key:t.groupName,attrs:{label:t.groupName}},e._l(t.plugins,function(e){return a("el-option",{key:e.pluginId,attrs:{label:e.pluginId,value:e.pluginId}})}),1)}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"插件版本",prop:"version"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择版本"},model:{value:e.form.version,callback:function(t){e.$set(e.form,"version",t)},expression:"form.version"}},e._l(e.allVersion,function(t){return a("el-option",{key:t.version,attrs:{label:t.version,value:t.version}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.version))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.pluginDescription))])])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"同步安装"}},[a("el-switch",{model:{value:e.form.sync,callback:function(t){e.$set(e.form,"sync",t)},expression:"form.sync"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var _=a("VU/8")(v,b,!1,function(e){a("3CLO")},"data-v-1bbd93f4",null).exports,k=a("bOdI"),y=a.n(k),w=a("BO1k"),C=a.n(w),S=a("Xxa5"),x=a.n(S),I=a("exGp"),z=a.n(I),N=(a("uGPS"),a("L6Z1")),F=a.n(N),D={props:{value:[String,Number,Object,Array],showBtns:[Boolean],expandedOnStart:{type:Boolean,default:!1},mode:{type:String,default:"tree"},modes:{type:Array,default:function(){return["tree","code","form","text","view"]}},lang:{type:String,default:"en"}},watch:{value:{immediate:!0,handler:function(e){var t=this;return z()(x.a.mark(function a(){return x.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.internalChange){a.next=5;break}return a.next=3,t.setEditor(e);case 3:t.error=!1,t.expandAll();case 5:case"end":return a.stop()}},a,t)}))()},deep:!0}},data:function(){return{editor:null,error:!1,json:this.value,internalChange:!1,expandedModes:["tree","view","form"],locale:{it:{save:"SALVA"},en:{save:"SAVE"},zh:{save:"保存"}}}},mounted:function(){var e=this,t={mode:this.mode,modes:this.modes,onChange:function(){try{var t=e.editor.get();e.json=t,e.error=!1,e.$emit("json-change",t),e.internalChange=!0,e.$emit("input",t),e.$nextTick(function(){e.internalChange=!1})}catch(t){e.error=!0,e.$emit("has-error",t)}},onModeChange:function(){e.expandAll()}};this.editor=new F.a(this.$el.querySelector(".jsoneditor-vue"),t,this.json)},methods:{expandAll:function(){this.expandedOnStart&&this.expandedModes.includes(this.editor.getMode())&&this.editor.expandAll()},onSave:function(){this.$emit("json-save",this.json)},setEditor:function(e){var t=this;return z()(x.a.mark(function a(){return x.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.editor&&t.editor.set(e);case 1:case"end":return a.stop()}},a,t)}))()}}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"jsoneditor-vue"}),e._v(" "),!1!==e.showBtns?a("div",{staticClass:"jsoneditor-btns"},[a("button",{staticClass:"json-save-btn",attrs:{type:"button",disabled:e.error},on:{click:function(t){return e.onSave()}}},[e._v(e._s(e.locale[e.lang].save))])]):e._e()])},staticRenderFns:[]};var R,T=(R={inject:["reload"],name:"Tasks",components:{vueJsonEditor:a("VU/8")(D,$,!1,function(e){a("hV9u")},"data-v-723cff9b",null).exports},props:["groupName"],data:function(){return{taskList:[],pluginInstallList:[],clazzList:[],dialogFormVisible:!1,taskDetailVisible:!1,dialogUpdateVisible:!1,dialogRecreateUpdateVisible:!1,dialogStateVisible:!1,form:{groupName:this.groupName,pluginId:"",taskName:"",mydataharborCreatorClazz:"",totalNumberOfPipeline:1,enableRebalance:!0,settingJsonConfig:{},configJson:{},tags:{}},taskDetailForm:[],detailSettingJsonConfig:{},detailConfigJson:{},detailTags:{},taskAssignedInfo:[],taskState:{created:{zh:"创建",color:""},started:{zh:"启动",color:"success"},suspend:{zh:"暂停",color:"info"},continued:{zh:"继续",color:"warning"},over:{zh:"结束",color:"over"}},states:{created:"创建",started:"启动",suspend:"暂停",continued:"继续",over:"结束"},dialogName:"提交任务",updateForm:{enableRebalance:!0,taskId:"",taskName:"",totalNumberOfPipeline:0},recreateUpdateForm:{taskId:"",configJson:{},settingJsonConfig:{},tags:{}},stateForm:{taskId:"",taskState:""},totalPage:[],pageSize:10,pageTotal:1,dataShow:[],currentPage:0,multipleSelection:[],collapseActiveNames:["settingConfig","taskConfig","tagConfig"],defaultActiveModel:"json",taskConfigDefaultActiveModel:"json",settingConfigJsonTreeData:[],taskConfigJsonTreeData:[],defaultProps:{children:"fieldInfos",label:"fieldName"},taskMonitorInfos:[]}},watch:{},mounted:function(){var e=this;this.$nextTick(function(){e.$refs.main.scrollTop=e.$refs.content.scrollHeight})}},y()(R,"mounted",function(){this.initData(),this.getTasksByGroupName()}),y()(R,"methods",{dateFormat:function(e,t){if(0!=e.lastRunTime){var a=new Date(e.lastRunTime);return a.getFullYear()+"-"+(a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1)+"-"+(a.getDate()<10?"0"+a.getDate():a.getDate())+" "+(a.getHours()<10?"0"+a.getHours():a.getHours())+":"+(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes())+":"+(a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds())}return"暂无"},compare:function(e){return function(t,a){var o=t[e];return a[e]-o}},clearData:function(){this.form={groupName:this.groupName,pluginId:"",mydataharborCreatorClazz:"",totalNumberOfPipeline:1,enableRebalance:!0,settingJsonConfig:{},configJson:{}},this.taskDetailForm=[],this.dialogName="提交任务"},initData:function(){var e=this;this.taskList=[],this.multipleSelection=[],this.postRequest("mydataharbor/task/listTaskByGroup?groupName="+this.groupName).then(function(t){if(0==t.code){var a=t.data;for(var o in a)e.taskList.push(a[o]);e.taskList.sort(e.compare("createTime")),e.initPageData()}else e.$message.error(t.msg)})},getTasksByGroupName:function(){var e=this;this.getRequest("/mydataharbor/node/plugin?groupName="+this.groupName).then(function(t){e.pluginInstallList=t.data,console.log(e.pluginInstallList)})},submit:function(){var e=this;this.dialogFormVisible=!1,this.form.configJson=m()(this.form.configJson),this.form.settingJsonConfig=m()(this.form.settingJsonConfig),this.postRequest("mydataharbor/task/submit",this.form).then(function(t){0==t.code?(e.$message.info("任务提交成功！"),e.initData(),e.clearData()):e.$message.error(t.msg)})},cancel:function(){this.dialogFormVisible=!1,this.taskDetailVisible=!1,this.dialogUpdateVisible=!1,this.dialogStateVisible=!1,this.clearData()},selectPluginId:function(e){var t=this;this.clazzList=[],this.form.mydataharborCreatorClazz="",this.pluginInstallList.forEach(function(a){a.pluginId==e&&null!=a.dataSinkCreatorInfos&&a.dataSinkCreatorInfos.forEach(function(e){e.canCreatePipeline&&t.clazzList.push({clazz:e.clazz,type:e.type})})})},creatorClazzChange:function(e){var t=this;this.form.settingJsonConfig={},this.form.configJson={},""!=e&&this.pluginInstallList.forEach(function(a){a.pluginId==t.form.pluginId&&a.dataSinkCreatorInfos.forEach(function(a){if(a.clazz==e){a.settingClassInfo.fieldName="root",a.configClassInfo.fieldName="root",t.settingConfigJsonTreeData=[a.settingClassInfo],t.taskConfigJsonTreeData=[a.configClassInfo];var o=!0,l=!1,n=void 0;try{for(var s,r=C()(a.settingClassInfo.fieldInfos);!(o=(s=r.next()).done);o=!0){var i=s.value;t.fillField(t.form.settingJsonConfig,i)}}catch(e){l=!0,n=e}finally{try{!o&&r.return&&r.return()}finally{if(l)throw n}}var u=!0,c=!1,p=void 0;try{for(var d,m=C()(a.configClassInfo.fieldInfos);!(u=(d=m.next()).done);u=!0){var f=d.value;t.fillField(t.form.configJson,f)}}catch(e){c=!0,p=e}finally{try{!u&&m.return&&m.return()}finally{if(c)throw p}}}})})},taskDetail:function(e){var t=this;this.taskDetailForm=[],this.taskAssignedInfo=[];var a=JSON.parse(m()(e));this.detailConfigJson=JSON.parse(e.configJson),this.detailTags=e.tags,this.detailSettingJsonConfig=JSON.parse(e.settingJsonConfig);var o=e.taskAssignedInfo.assignedInfoMap;for(var l in o)this.taskAssignedInfo.push(o[l]);this.getRequest("mydataharbor/task/getTaskMonitorInfo",{taskId:e.taskId}).then(function(e){0==e.code?t.taskMonitorInfos=[e.data]:t.$message.error(e.msg)}),this.taskDetailForm.push(a),this.taskDetailVisible=!0},taskUpdate:function(e){this.updateForm.taskId=e.taskId,this.updateForm.taskName=e.taskName,this.updateForm.totalNumberOfPipeline=e.totalNumberOfPipeline,this.updateForm.enableRebalance=e.enableRebalance,this.updateForm.tags=e.tags,this.dialogUpdateVisible=!0},updateFormSubmit:function(){var e=this;this.postRequest("mydataharbor/task/editTask",this.updateForm).then(function(t){0==t.code?(e.$message.info("任务修改成功！"),e.initData()):e.$message.error(t.msg)}),this.dialogUpdateVisible=!1},taskRecreateUpdate:function(e){this.recreateUpdateForm.taskId=e.taskId,this.recreateUpdateForm.configJson=JSON.parse(e.configJson),this.recreateUpdateForm.tags=e.tags,this.recreateUpdateForm.settingJsonConfig=JSON.parse(e.settingJsonConfig),this.selectPluginId(e.pluginId),this.creatorClazzChange(e.mydataharborCreatorClazz),this.dialogRecreateUpdateVisible=!0},recreateUpdateFormSubmit:function(){var e=this;this.recreateUpdateForm.configJson=m()(this.recreateUpdateForm.configJson),this.recreateUpdateForm.settingJsonConfig=m()(this.recreateUpdateForm.settingJsonConfig),this.postRequest("mydataharbor/task/recreateTask",this.recreateUpdateForm).then(function(t){0==t.code?(e.$message.info("任务重建成功！"),e.initData()):e.$message.error(t.msg)}),this.dialogRecreateUpdateVisible=!1},taskFork:function(e){this.dialogName="复制任务",this.form=JSON.parse(m()(e)),this.form.configJson=JSON.parse(e.configJson),this.form.settingJsonConfig=JSON.parse(e.settingJsonConfig),this.dialogFormVisible=!0},taskStates:function(e){this.stateForm.taskId=e.taskId,this.stateForm.taskState=e.taskState,this.dialogStateVisible=!0},taskDelete:function(e){var t=this;this.$confirm("是否永久删除该任务："+e.taskId,"确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){t.postRequest("/mydataharbor/task/deleteTask?taskId="+e.taskId).then(function(e){0==e.code?t.$message({type:"info",message:"删除成功！"}):t.$message({type:"warning",message:"删除失败！"+e.msg})}),t.initData()})},updateStateFormSubmit:function(){var e=this;this.postRequest("mydataharbor/task/manageTaskState?taskId="+this.stateForm.taskId+"&taskState="+this.stateForm.taskState).then(function(t){0==t.code?(e.$message.info("任务状态修改成功！"),e.initData()):e.$message.error(t.msg)}),this.dialogStateVisible=!1},initPageData:function(){this.pageTotal=this.taskList.length;for(var e=0;e<this.pageTotal;e++)this.totalPage[e+1]=this.taskList.slice(this.pageSize*e,this.pageSize*(e+1));this.handlePageChange(1)},handlePageChange:function(e){this.currentPage=e,this.dataShow=this.totalPage[this.currentPage]},handleSizeChange:function(e){this.pageSize=e,this.initPageData()},handleSelectionChange:function(e){this.multipleSelection=e},batchDelete:function(){var e=this;if(console.log(this.multipleSelection),0!=this.multipleSelection.length){var t=0;this.$confirm("是否永久删除已选的"+this.multipleSelection.length+"条数据","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(function(){e.multipleSelection.forEach(function(a){e.postRequest("/mydataharbor/task/deleteTask?taskId="+a.taskId).then(function(a){0==a.code?(t+=1)==e.multipleSelection.length&&e.$message({type:"info",message:"成功删除"+t+"条数据！"}):e.$message.error(a.msg)})}),e.reload()})}else this.$message.info("当前未选择任务任务数据，请先勾选需要删除的数据！")},renderTreeContent:function(e,t){t.node;var a=t.data;t.store;return e("span",{class:"custom-tree-node"},[e("span",[a.fieldName," ",a.title," 【类型:",a.clazzStr,"】【",1==a.array?"数组":1==a.map?"map":1==a.baseType?"基础类型":"对象","】",1==a.enumeration?"【枚举】候选值:"+m()(a.candidateValue):"",1==a.require?"【必须】":"【非必须】",null!=a.defaultValue&&""!=a.defaultValue?"【默认值："+a.defaultValue+"】":"",a.des])])},fillField:function(e,t){if(t.require&&(t.array?e[t.fieldName]=[]:t.map?e[t.fieldName]={}:t.baseType?e[t.fieldName]=t.defaultValue:e[t.fieldName]={},null!=t.fieldInfos&&t.fieldInfos.length>0)){var a=!0,o=!1,l=void 0;try{for(var n,s=C()(t.fieldInfos);!(a=(n=s.next()).done);a=!0){var r=n.value;this.fillField(e[t.fieldName],r)}}catch(e){o=!0,l=e}finally{try{!a&&s.return&&s.return()}finally{if(o)throw l}}}}}),R),P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("提交任务")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.batchDelete()}}},[e._v("批量删除")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.dataShow,border:"",width:"100%","header-cell-class-name":"table-header"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskId",label:"任务ID",width:"240",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"任务名",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[void 0!=t.row.taskName?a("span",[e._v(e._s(t.row.taskName))]):a("span",[e._v("null")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"100",prop:"taskState"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.taskState[t.row.taskState].color,size:"small"}},[e._v(e._s(e.taskState[t.row.taskState].zh)+"\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"pluginId",label:"插件ID",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"mydataharborCreatorClazz",label:"创建器"}}),e._v(" "),a("el-table-column",{attrs:{label:"负载均衡",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.enableRebalance?a("el-tag",{attrs:{size:"small"}},[e._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("false")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"totalNumberOfPipeline",label:"管道数",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"144",prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("parseTime")(t.row.createTime,"{y}-{m}-{d} {h}:{i}")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间",width:"144",prop:"lastUpdateTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("parseTime")(t.row.lastUpdateTime,"{y}-{m}-{d} {h}:{i}")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"tags",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[void 0!=t.row.tags?a("span",[e._v(e._s(t.row.tags))]):a("span",[e._v("null")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",fixed:"right",width:"480"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button-group",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.taskDetail(t.row)}}},[e._v("详情")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.taskUpdate(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){return e.taskRecreateUpdate(t.row)}}},[e._v("重建")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.taskFork(t.row)}}},[e._v("复制")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.taskStates(t.row)}}},[e._v("状态管理")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.taskDelete(t.row)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,50,100],"page-size":e.pageSize,total:e.pageTotal,background:"",layout:"sizes, total, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogName,visible:e.dialogFormVisible,width:"80%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form,"label-position":"left","label-width":"70px"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"组名"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",size:"small",disabled:""},model:{value:e.form.groupName,callback:function(t){e.$set(e.form,"groupName",t)},expression:"form.groupName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"插件ID",prop:"pluginId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择组件ID",size:"small"},on:{change:e.selectPluginId},model:{value:e.form.pluginId,callback:function(t){e.$set(e.form,"pluginId",t)},expression:"form.pluginId"}},e._l(e.pluginInstallList,function(e){return a("el-option",{key:e.id,attrs:{label:e.pluginId,value:e.pluginId}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"管道数"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",size:"small"},model:{value:e.form.totalNumberOfPipeline,callback:function(t){e.$set(e.form,"totalNumberOfPipeline",t)},expression:"form.totalNumberOfPipeline"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"创建器"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择CreatorClazz",size:"small"},on:{change:e.creatorClazzChange},model:{value:e.form.mydataharborCreatorClazz,callback:function(t){e.$set(e.form,"mydataharborCreatorClazz",t)},expression:"form.mydataharborCreatorClazz"}},e._l(e.clazzList,function(e){return a("el-option",{key:e.id,attrs:{label:e.type+e.clazz,value:e.clazz}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"任务名"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入任务名",autocomplete:"off",size:"small"},model:{value:e.form.taskName,callback:function(t){e.$set(e.form,"taskName",t)},expression:"form.taskName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"负载均衡"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择是否负载均衡",size:"small"},model:{value:e.form.enableRebalance,callback:function(t){e.$set(e.form,"enableRebalance",t)},expression:"form.enableRebalance"}},[a("el-option",{attrs:{label:"true",value:"true"}}),e._v(" "),a("el-option",{attrs:{label:"false",value:"false"}})],1)],1),e._v(" "),a("el-alert",{staticStyle:{"margin-top":"-20px"},attrs:{title:"值为false，节点停机，任务将不会自动转移！",type:"info","show-icon":""}})],1)],1)],1),e._v(" "),a("el-collapse",{model:{value:e.collapseActiveNames,callback:function(t){e.collapseActiveNames=t},expression:"collapseActiveNames"}},[a("el-collapse-item",{attrs:{title:"settingContextConfig",name:"settingConfig"}},[a("el-tabs",{model:{value:e.defaultActiveModel,callback:function(t){e.defaultActiveModel=t},expression:"defaultActiveModel"}},[a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.form.settingJsonConfig,callback:function(t){e.$set(e.form,"settingJsonConfig",t)},expression:"form.settingJsonConfig"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.settingConfigJsonTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1),e._v(" "),a("el-collapse-item",{attrs:{title:"taskConfig",name:"taskConfig"}},[a("el-tabs",{model:{value:e.taskConfigDefaultActiveModel,callback:function(t){e.taskConfigDefaultActiveModel=t},expression:"taskConfigDefaultActiveModel"}},[a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.form.configJson,callback:function(t){e.$set(e.form,"configJson",t)},expression:"form.configJson"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.taskConfigJsonTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1),e._v(" "),a("el-collapse-item",{attrs:{title:"tagConfig",name:"tagConfig"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.taskDetailVisible,title:"任务详情",width:"60%"},on:{"update:visible":function(t){e.taskDetailVisible=t}}},[a("p",[e._v("基本信息：")]),e._v(" "),a("el-table",{attrs:{data:e.taskDetailForm}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"taskId",label:"任务ID"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"taskName",label:"任务名称"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"pluginId",label:"插件ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mydataharborCreatorClazz",label:"创建器"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalNumberOfPipeline",label:"管道数"}}),e._v(" "),a("el-table-column",{attrs:{label:"负载均衡"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.enableRebalance?a("el-tag",{attrs:{size:"small"}},[e._v("true")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("false")])]}}])})],1),e._v(" "),a("p",[e._v("监控信息：")]),e._v(" "),a("el-table",{attrs:{data:e.taskMonitorInfos}},[a("el-table-column",{attrs:{formatter:e.dateFormat,prop:"lastRunTime",label:"最近一次处理时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"recordCount",label:"拉取总数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pollErrorCount",label:"拉取异常次数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"protocolConvertSuccessCount",label:"协议转换成功数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"protocolConvertErrorCount",label:"协议转换失败数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkerSuccessCount",label:"校验通过数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkerErrorCount",label:"校验失败数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dataConvertSuccessCount",label:"数据转换成功数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dataConvertErrorCount",label:"数据转换失败数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"writeSuccessCount",label:"写入成功数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"writeErrorCount",label:"写入失败数"}})],1),e._v(" "),a("p",[e._v("任务分配信息：")]),e._v(" "),a("el-table",{attrs:{data:e.taskAssignedInfo}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("管道信息：")]),e._v(" "),e._l(t.row.pipelineStates,function(t,o){return a("p",{key:o},[e._v(e._s(o)+"："+e._s(t))])}),e._v(" "),a("el-divider"),e._v(" "),a("p",[e._v("写总计：")]),e._v(" "),e._l(t.row.writeTotal,function(t,o){return a("p",{key:o},[e._v(e._s(o)+"："+e._s(t))])})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeName",label:"节点",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskNum",label:"任务数",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"createException",label:"创建异常"},scopedSlots:e._u([{key:"default",fn:function(t){return[null==t.row.createException?a("span",[e._v("无")]):a("span",[e._v(e._s(t.row.createException))])]}}])})],1),e._v(" "),a("p",[e._v("任务设置")]),e._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.detailSettingJsonConfig,callback:function(t){e.detailSettingJsonConfig=t},expression:"detailSettingJsonConfig"}}),e._v(" "),a("p",[e._v("任务行为")]),e._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.detailConfigJson,callback:function(t){e.detailConfigJson=t},expression:"detailConfigJson"}}),e._v(" "),a("p",[e._v("tags其它属性")]),e._v(" "),a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.detailTags,callback:function(t){e.detailTags=t},expression:"detailTags"}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogUpdateVisible,title:"任务修改",width:"42%"},on:{"update:visible":function(t){e.dialogUpdateVisible=t}}},[a("el-form",{attrs:{model:e.updateForm,"label-position":"left"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"任务ID","label-width":"70px"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off",disabled:""},model:{value:e.updateForm.taskId,callback:function(t){e.$set(e.updateForm,"taskId",t)},expression:"updateForm.taskId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"管道数","label-width":"70px",prop:"pluginId"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off"},model:{value:e.updateForm.totalNumberOfPipeline,callback:function(t){e.$set(e.updateForm,"totalNumberOfPipeline",t)},expression:"updateForm.totalNumberOfPipeline"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"任务名","label-width":"70px",prop:"pluginId"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off"},model:{value:e.updateForm.taskName,callback:function(t){e.$set(e.updateForm,"taskName",t)},expression:"updateForm.taskName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"负载均衡","label-width":"70px",prop:"version"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择是否负载均衡"},model:{value:e.updateForm.enableRebalance,callback:function(t){e.$set(e.updateForm,"enableRebalance",t)},expression:"updateForm.enableRebalance"}},[a("el-option",{attrs:{label:"true",value:"true"}}),e._v(" "),a("el-option",{attrs:{label:"false",value:"false"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateFormSubmit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogRecreateUpdateVisible,title:"重建任务（该操作会先销毁当前任务的所有管道实例，然后重新创建，很重的一种操作）",width:"80%"},on:{"update:visible":function(t){e.dialogRecreateUpdateVisible=t}}},[a("el-form",{attrs:{model:e.recreateUpdateForm,"label-position":"left"}},[a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"任务ID","label-width":"70px"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off",disabled:""},model:{value:e.recreateUpdateForm.taskId,callback:function(t){e.$set(e.recreateUpdateForm,"taskId",t)},expression:"recreateUpdateForm.taskId"}})],1)],1)],1),e._v(" "),a("el-collapse",{model:{value:e.collapseActiveNames,callback:function(t){e.collapseActiveNames=t},expression:"collapseActiveNames"}},[a("el-collapse-item",{attrs:{title:"settingContextConfig",name:"settingConfig"}},[a("el-tabs",{model:{value:e.defaultActiveModel,callback:function(t){e.defaultActiveModel=t},expression:"defaultActiveModel"}},[a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.recreateUpdateForm.settingJsonConfig,callback:function(t){e.$set(e.recreateUpdateForm,"settingJsonConfig",t)},expression:"recreateUpdateForm.settingJsonConfig"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.settingConfigJsonTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1),e._v(" "),a("el-collapse-item",{attrs:{title:"taskConfig",name:"taskConfig"}},[a("el-tabs",{model:{value:e.taskConfigDefaultActiveModel,callback:function(t){e.taskConfigDefaultActiveModel=t},expression:"taskConfigDefaultActiveModel"}},[a("el-tab-pane",{attrs:{label:"json",name:"json"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.recreateUpdateForm.configJson,callback:function(t){e.$set(e.recreateUpdateForm,"configJson",t)},expression:"recreateUpdateForm.configJson"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"参数说明",name:"form"}},[a("el-tree",{attrs:{data:e.taskConfigJsonTreeData,props:e.defaultProps,"default-expand-all":!0,"render-content":e.renderTreeContent}})],1)],1)],1),e._v(" "),a("el-collapse-item",{attrs:{title:"tagConfig",name:"tagConfig"}},[a("vue-json-editor",{attrs:{mode:"code",lang:"zh"},model:{value:e.recreateUpdateForm.tags,callback:function(t){e.$set(e.recreateUpdateForm,"tags",t)},expression:"recreateUpdateForm.tags"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.recreateUpdateFormSubmit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogStateVisible,title:"任务状态",width:"23%"},on:{"update:visible":function(t){e.dialogStateVisible=t}}},[a("el-form",{attrs:{model:e.stateForm,"label-position":"left"}},[a("el-form-item",{attrs:{label:"任务ID","label-width":"70px"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{autocomplete:"off",disabled:""},model:{value:e.stateForm.taskId,callback:function(t){e.$set(e.stateForm,"taskId",t)},expression:"stateForm.taskId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务状态","label-width":"70px",prop:"version"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:"请选择任务状态"},model:{value:e.stateForm.taskState,callback:function(t){e.$set(e.stateForm,"taskState",t)},expression:"stateForm.taskState"}},e._l(e.states,function(e,t){return a("el-option",{key:e,attrs:{label:e,value:t}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateStateFormSubmit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var V=a("VU/8")(T,P,!1,function(e){a("jqt7")},"data-v-90d6e82e",null).exports,J=a("8U58"),M=a.n(J),U=(a("4/hK"),a("hD67"),a("tPrY"),a("9ozf"),a("lYxz"),window.CodeMirror||M.a),A={name:"Script",props:{groupName:String,value:String,language:{type:String,default:null}},data:function(){return{code:"def cal(int a, int b){\n  return a+b\n}\n",mode:"groovy",coder:null,options:{tabSize:8,theme:"abcdef",lineNumbers:!0,line:!0}}},mounted:function(){this._initialize()},methods:{_initialize:function(){var e=this;if(this.coder=U.fromTextArea(this.$refs.textarea,this.options),this.coder.setValue(this.value||this.code),this.coder.on("change",function(t){e.code=t.getValue(),e.$emit&&e.$emit("input",e.code)}),this.language){var t=this._getLanguage(this.language);t&&(this.mode=t.label)}},changeMode:function(){}}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"in-coder-panel"},[a("div",{staticStyle:{margin:"20px 0 20px 0"}},[a("el-row",{attrs:{gutter:12}},[a("el-col",{attrs:{span:6}},[a("div",[e._v("\n          输入源："),a("el-select",{staticClass:"code-mode-select",attrs:{size:"small",value:""},on:{change:e.changeMode}})],1)]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",[e._v("\n          输出源："),a("el-select",{staticClass:"code-mode-select",attrs:{size:"small",value:""},on:{change:e.changeMode}})],1)])],1)],1),e._v(" "),a("div",[a("textarea",{ref:"textarea"})]),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("提交执行")])],1)])},staticRenderFns:[]};var O={inject:["reload"],name:"operation",props:["groupName"],data:function(){return{}},methods:{deleteGroup:function(){var e=this;this.$confirm("此操作将永久删除【"+this.groupName+"】集群, 是否继续?","确认提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.getRequest("/mydataharbor/node/deleteGroup?groupName="+e.groupName).then(function(t){console.log(t),0==t.code?(e.$message({type:"success",message:"删除成功!"}),e.reload()):e.$message({type:"error",message:"删除失败，"+t.msg})})}).catch(function(){e.$message({type:"info",message:"已取消删除!"})})}}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tag",[e._v("当前分组： "+e._s(e.groupName))]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger",size:"small"},on:{click:function(t){return e.deleteGroup()}}},[e._v("删除该分组")])],1)},staticRenderFns:[]};var E={name:"Cluster",components:{Tasks:V,Plugins:_,Node:h,Script:a("VU/8")(A,q,!1,function(e){a("hP/U")},null,null).exports,Operation:a("VU/8")(O,j,!1,function(e){a("Xrj0")},"data-v-d85d2bca",null).exports},data:function(){return{cluster:{},selectGroup:"",selectOption:"节点"}},mounted:function(){this.initData()},methods:{initData:function(){var e=this;this.getRequest("mydataharbor/node/groupList").then(function(t){if(0==t.code){e.cluster=t.data;var a=e.$router.history.current.query,o=JSON.parse(m()(a));null!=o.selectOption&&(e.selectOption=o.selectOption),e.selectGroup=o.selectGroup;var l="",n=0,s=!1;for(var r in e.cluster)0==n&&(l=r),n++,null!=e.selectGroup&&e.selectGroup==r&&(s=!0);s||(e.selectGroup=l)}})},groupChange:function(e,t){var a=this.$router.history.current.query,o=this.$router.history.current.path,l=JSON.parse(m()(a));l.selectGroup=e.name,this.$router.push({path:o,query:l})},optionChange:function(e,t){var a=this.$router.history.current.query,o=this.$router.history.current.path,l=JSON.parse(m()(a));l.selectOption=e.name,this.$router.push({path:o,query:l})}}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container mixin-components-container"},[a("el-card",{staticClass:"box-card",staticStyle:{padding:"5px"}},[a("el-tabs",{attrs:{"tab-position":"left"},on:{"tab-click":e.groupChange},model:{value:e.selectGroup,callback:function(t){e.selectGroup=t},expression:"selectGroup"}},e._l(e.cluster,function(t){return a("el-tab-pane",{key:t.id,attrs:{label:t.groupName,name:t.groupName,lazy:!0}},[a("el-tabs",{staticStyle:{"margin-left":"10px"},attrs:{"active-name":"first"},on:{"tab-click":e.optionChange},model:{value:e.selectOption,callback:function(t){e.selectOption=t},expression:"selectOption"}},[a("el-tab-pane",{attrs:{label:"节点",name:"节点",lazy:!0}},[a("Node",{attrs:{"node-list":t.nodeInfos}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"插件",name:"插件",lazy:!0}},[a("Plugins",{attrs:{"group-name":t.groupName}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"任务",name:"任务",lazy:!0}},[a("Tasks",{attrs:{"group-name":t.groupName}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"操作",name:"操作",lazy:!0}},[a("Operation",{attrs:{"group-name":t.groupName}})],1)],1)],1)}),1)],1)],1)},staticRenderFns:[]};var B=a("VU/8")(E,L,!1,function(e){a("E22g")},"data-v-d178bca4",null).exports,G={name:"Plugin",data:function(){return{query:{pageNo:1,pageSize:10,pluginId:"",version:"",des:""},tableData:[],cloudData:[],pageTotal:0,showFile:!0,pluginTabActive:"localPlugin",repoForm:{repoName:"",config:{email:"",token:""}}}},mounted:function(){this.initData()},methods:{initData:function(){var e=this;console.log("loading info……"),this.getRequest("mydataharbor/plugin/listPlugins",this.query).then(function(t){e.tableData=t.data["本地存储库"],e.cloudData=t.data["MyDataHarbor官方插件存储库"],console.log(t)}),this.getRequest("mydataharbor/plugin/queryPluginRepoConfig",this.query).then(function(t){e.repoForm.config=t.data["MyDataHarbor-Reporsitory"].config,console.log(t)})},downloadToLocal:function(e){var t=this;this.$message.warning("下载插件需要不少时间，请耐心等待！"),this.setLoadingMsg("服务器带宽有限，努力下载中..."),this.getRequest(e).then(function(e){0==e.code?(t.$message.info("下载成功！"),t.initData()):t.$message.warning(e.msg)})},configPluginRepo:function(){var e=this;this.repoForm.repoName="MyDataHarbor-Reporsitory",this.postRequest("mydataharbor/plugin/configPluginRepo",this.repoForm).then(function(t){0==t.code?(e.$message.info("Token修改成功！"),e.initData()):e.$message.warning(t.msg)})},clear:function(){this.initData()},handleSuccess:function(e,t){console.log("success"),-1==e.code&&(this.$message.error(e.msg),this.showFile=!1)},handleError:function(e,t,a){console.log("error"+e),console.log(t),console.log(a)}}},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container mixin-components-container"},[a("el-card",{staticClass:"box-card",staticStyle:{padding:"5px"}},[a("el-tabs",{attrs:{type:"card"},model:{value:e.pluginTabActive,callback:function(t){e.pluginTabActive=t},expression:"pluginTabActive"}},[a("el-tab-pane",{attrs:{label:"本地插件",name:"localPlugin"}},[a("div",{staticClass:"handle-box"},[a("div",[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/mydataharbor/plugin/uploadPlugin","on-success":e.handleSuccess,"on-error":e.handleError,"show-file-list":e.showFile}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传插件")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jar文件，且不超过500M")])],1)],1)]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},e._l(e.tableData,function(t,o){return o%2==0?a("el-col",{key:o,attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{height:"50px"},attrs:{slot:"header"},slot:"header"},[null!=t.imageBase64?a("img",{staticStyle:{height:"50px"},attrs:{src:t.imageBase64}}):e._e(),e._v("\n                  "+e._s(t.groupName)+"\n                ")]),e._v(" "),a("el-collapse",{attrs:{value:t.plugins[0].pluginId}},e._l(t.plugins,function(t,o){return a("el-collapse-item",{key:o,attrs:{title:t.pluginId,name:t.pluginId}},[a("el-table",{directives:[{name:"fit-columns",rawName:"v-fit-columns"}],ref:"multipleTable",refInFor:!0,staticClass:"table",attrs:{fit:!0,data:t.repoPlugins,border:"","row-key":"pluginId","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"pluginId",label:"插件id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"依赖"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.dependencies,function(t){return a("p",{staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v("【插件id:"+e._s(t.pluginId)+",版本:"+e._s(t.pluginVersionSupport)+",可选："+e._s(t.optional)+"】")])})}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","show-overflow-tooltip":"",prop:"pluginDescription",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{href:"/mydataharbor/plugin/downloadPlugin?pluginId="+t.row.pluginId+"&version="+t.row.version,type:"primary",icon:"el-icon-download",target:"_blank"}},[e._v("下载\n                          ")])]}}],null,!0)})],1)],1)}),1)],1)],1):e._e()}),1),e._v(" "),a("el-col",{attrs:{span:12}},e._l(e.tableData,function(t,o){return o%2==1?a("el-col",{key:o,attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{height:"50px"},attrs:{slot:"header"},slot:"header"},[null!=t.imageBase64?a("img",{staticStyle:{height:"50px"},attrs:{src:t.imageBase64}}):e._e(),e._v("\n                  "+e._s(t.groupName)+"\n                ")]),e._v(" "),a("el-collapse",{attrs:{value:t.plugins[0].pluginId}},e._l(t.plugins,function(t,o){return a("el-collapse-item",{key:o,attrs:{title:t.pluginId,name:t.pluginId}},[a("el-table",{directives:[{name:"fit-columns",rawName:"v-fit-columns"}],ref:"multipleTable",refInFor:!0,staticClass:"table",attrs:{fit:!0,data:t.repoPlugins,border:"","row-key":"pluginId","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"pluginId",label:"插件id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"依赖"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.dependencies,function(t,o){return a("p",{key:o,staticStyle:{color:"#8492a6","font-size":"13px"}},[e._v("【插件id:"+e._s(t.pluginId)+",版本:"+e._s(t.pluginVersionSupport)+",可选："+e._s(t.optional)+"】")])})}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"pluginDescription",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{href:"/mydataharbor/plugin/downloadPlugin?pluginId="+t.row.pluginId+"&version="+t.row.version,type:"primary",icon:"el-icon-download",target:"_blank"}},[e._v("下载\n                          ")])]}}],null,!0)})],1)],1)}),1)],1)],1):e._e()}),1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"插件市场",name:"cloudPlugin"}},[a("div",{staticClass:"handle-box"},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.repoForm}},[a("el-form-item",{attrs:{label:"email"}},[a("el-input",{attrs:{placeholder:"email"},model:{value:e.repoForm.config.email,callback:function(t){e.$set(e.repoForm.config,"email",t)},expression:"repoForm.config.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"token"}},[a("el-input",{attrs:{placeholder:"token",type:"password"},model:{value:e.repoForm.config.token,callback:function(t){e.$set(e.repoForm.config,"token",t)},expression:"repoForm.config.token"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.configPluginRepo}},[e._v("修改")])],1),e._v(" "),a("el-form-item",[a("a",{attrs:{target:"_blank",href:"https://www.mydataharbor.com/user/info.html"}},[e._v("获取账户Token")])])],1)],1)]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},e._l(e.cloudData,function(t,o){return o%2==0?a("el-col",{key:o,attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{height:"50px"},attrs:{slot:"header"},slot:"header"},[null!=t.imageBase64?a("img",{staticStyle:{height:"50px"},attrs:{src:t.imageBase64}}):e._e(),e._v("\n                  "+e._s(t.groupName)+"\n                ")]),e._v(" "),a("el-collapse",{attrs:{value:t.plugins[0].pluginId}},e._l(t.plugins,function(t,o){return a("el-collapse-item",{key:o,attrs:{title:t.pluginId,name:t.pluginId}},[a("el-table",{directives:[{name:"fit-columns",rawName:"v-fit-columns"}],ref:"multipleTable",refInFor:!0,staticClass:"table",attrs:{data:t.repoPlugins,border:"","row-key":"pluginId","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"pluginId",label:"插件id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本"}}),e._v(" "),a("el-table-column",{attrs:{label:"授权"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.authed?a("el-tag",{attrs:{size:"small"}},[e._v("已授权")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("未授权")])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"依赖"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.dependencies,function(t,o){return a("p",{key:o},[e._v("【插件id:"+e._s(t.pluginId)+",版本:"+e._s(t.pluginVersionSupport)+",可选："+e._s(t.optional)+"】")])})}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"pluginDescription",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(a){return e.downloadToLocal("/mydataharbor/plugin/downloadToLocal?pluginId="+t.row.pluginId+"&version="+t.row.version+"&repoType=MyDataHarbor-Reporsitory")}}},[e._v("\n                            下载到本地\n                          ")])]}}],null,!0)})],1)],1)}),1)],1)],1):e._e()}),1),e._v(" "),a("el-col",{attrs:{span:12}},e._l(e.cloudData,function(t,o){return o%2==1?a("el-col",{key:o,attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{height:"50px"},attrs:{slot:"header"},slot:"header"},[null!=t.imageBase64?a("img",{staticStyle:{height:"50px"},attrs:{src:t.imageBase64}}):e._e(),e._v("\n                  "+e._s(t.groupName)+"\n                ")]),e._v(" "),a("el-collapse",{attrs:{value:t.plugins[0].pluginId}},e._l(t.plugins,function(t,o){return a("el-collapse-item",{key:o,attrs:{title:t.pluginId,name:t.pluginId}},[a("el-table",{directives:[{name:"fit-columns",rawName:"v-fit-columns"}],ref:"multipleTable",refInFor:!0,staticClass:"table",attrs:{data:t.repoPlugins,border:"","row-key":"pluginId","header-cell-class-name":"table-header"}},[a("el-table-column",{attrs:{prop:"pluginId",label:"插件id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本"}}),e._v(" "),a("el-table-column",{attrs:{label:"授权"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.authed?a("el-tag",{attrs:{size:"small"}},[e._v("已授权")]):a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("未授权")])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"依赖"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.dependencies,function(t,o){return a("p",{key:o},[e._v("【插件id:"+e._s(t.pluginId)+",版本:"+e._s(t.pluginVersionSupport)+",可选："+e._s(t.optional)+"】")])})}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"pluginDescription",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(a){return e.downloadToLocal("/mydataharbor/plugin/downloadToLocal?pluginId="+t.row.pluginId+"&version="+t.row.version+"&repoType=MyDataHarbor-Reporsitory")}}},[e._v("\n                            下载到本地\n                          ")])]}}],null,!0)})],1)],1)}),1)],1)],1):e._e()}),1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var Y=a("VU/8")(G,H,!1,function(e){a("Fltz")},"data-v-1488bfc6",null).exports,W=a("//Fk"),K=a.n(W),X=a("mtWM"),Q=a.n(X),Z=a("zL8q"),ee=a.n(Z);o.default.use(Z.Loading);var te=void 0,ae="拼命加载中...";Q.a.interceptors.request.use(function(e){return te=Z.Loading.service({lock:!0,text:ae,background:"rgba(255,255,255,0)"}),e},function(e){return K.a.reject(e)}),Q.a.interceptors.response.use(function(e){if(te.close(),ae="拼命加载中...",!e.status||200!=e.status||500!=e.data.status)return e.data;Z.Message.error({message:e.data.msg})},function(e){504==e.response.status||404==e.response.status?Z.Message.error({message:"服务端宕机了！"}):403==e.response.status?Z.Message.error({message:"权限不足，请联系管理员！"}):401==e.response.status?(Z.Message.error({message:"尚未登录，请登录！"}),oe.replace("/")):e.response.data.msg?Z.Message.error({message:e.response.data.msg}):Z.Message.error({message:"未知错误！"})});o.default.prototype.postRequest=function(e,t){return Q()({method:"post",url:""+e,data:t})},o.default.prototype.getRequest=function(e,t){return Q()({method:"get",url:""+e,params:t})},o.default.prototype.postKeyValueRequest=function(e,t){return Q()({method:"post",url:""+e,data:t,transformRequest:[function(e){var t="";for(var a in e)t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a])+"&";return console.log(t),t}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o.default.prototype.putRequest=function(e,t){return Q()({method:"put",url:""+e,data:t})},o.default.prototype.deleteRequest=function(e,t){return Q()({method:"delete",url:""+e,params:t})},o.default.prototype.setLoadingMsg=function(e){ae=e},o.default.use(s.a),o.default.config.productionTip=!1;var oe=new s.a({routes:[{path:"/",name:"首页",component:p,hidden:!0},{path:"/home",name:"home",component:p,hidden:!0,children:[{path:"/cluster",name:"集群管理",component:B,hidden:!0},{path:"/plugin",name:"插件管理",component:Y,hidden:!0}]}]});a("tvR6");o.default.config.productionTip=!1,o.default.use(ee.a),o.default.filter("FormatDate",function(e,t){return function(e,t){e=new Date(e),void 0===t&&(t="yyyy-MM-dd HH:mm:ss"),/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var o in a)if(new RegExp("("+o+")").test(t)){var l=a[o]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?l:("00"+l).substr(l.length))}return t}(e,t)}),new o.default({el:"#app",router:oe,components:{App:n},template:"<App/>"})},ONMz:function(e,t,a){e.exports=a.p+"static/img/mydataharbor.fca5557.png"},Xrj0:function(e,t){},hD67:function(e,t){},"hP/U":function(e,t){},hV9u:function(e,t){},jqt7:function(e,t){},tPrY:function(e,t){},tvR6:function(e,t){},uGPS:function(e,t){}},["NHnr"]);